<div ng-controller="ProyectoClienteControlador as proyectoCliente" class="container-fluid">
    
    <br>
    <div class="row">
        <div class="col-xs-12">
           
            <button class="btn botonAgregarAcordion pull-right" ng-click="AgregarProyecto()" >
                <span>
                    <span class="fa fa-plus"></span>
                    <span> Nuevo Proyecto</span> 
                </span>
            </button>
        </div>
    </div>
    
    <div class="row" ng-if="proyecto.length == 0">
        <div class="col-xs-12" >
            
            <div  class="textoPerfilHome">
                <span>Sin Proyectos</span>
            </div>
                        
        </div>
    </div>
    
     <div class="row" ng-if="proyecto.length > 0">
        <div class="col-xs-12" >
            
            <div ng-repeat="proyecto in proyecto | orderBy:['EstatusProyecto.EstatusProyectoId', 'TipoProyecto.Nombre', 'Nombre']">
               
               <div class="input-group" >
                   
                    <span class="btnStatusProyecto form-control"  style="overflow:hidden !important;  font-weight: normal; height: 34px;" ng-click="CambiarProyectoDetalle(proyecto)" ng-class="{Seleccionado: proyectoDetalle == proyecto.ProyectoId}"> 
                        <span class="fa fa-chevron-right" style="width:20px;" ng-if="proyectoDetalle != proyecto.ProyectoId"></span>
                        <span class="fa fa-chevron-up" style="width:20px;" ng-if="proyectoDetalle == proyecto.ProyectoId"></span>
                        {{proyecto.TipoProyecto.Nombre}}: {{proyecto.Nombre}}
                    </span>
                    
                    <div class="input-group-btn">
                        <button class="btn  btnStatusProyecto {{proyecto.EstatusProyecto.Nombre}}" data-toggle="dropdown" style=" height: 34px">
                            <span>{{proyecto.EstatusProyecto.Nombre}} </span>
                            <span class="fa fa-caret-down pull-right"> </span>
                        </button>
                        <ul class="dropdown-menu dropdown-menu-right dropdownRight">
                            <li ng-repeat="estatus in estatus" ng-show="MostrarEstatus(proyecto.EstatusProyecto.EstatusProyectoId, estatus.EstatusProyectoId)">
                                <a class="dropdownOpcionModal" ng-click="CambiarEstatus(proyecto, estatus)"> {{estatus.Nombre}} </a> 
                            </li>
                        </ul>
                    </div>
                    
               </div>
               
               <!-- Datos del proyecto -->
               <div ng-if="proyectoDetalle == proyecto.ProyectoId" >
                   
                   <div class="textoInfo">
                       <span  ng-if="proyecto.Domicilio == null">
                           Sin Dirección
                       </span>

                       <span ng-if="proyecto.Domicilio != null">
                           {{proyecto.Domicilio.Domicilio}}, {{proyecto.Domicilio.Colonia}}. {{proyecto.Domicilio.Ciudad}}, {{proyecto.Domicilio.Estado}}. C.P. {{proyecto.Domicilio.Codigo}}. 
                       </span>
                       
                       <a class="botonAgregarAcordion" style="font-size: 12pt" ng-click="EditarProyectoModal(proyecto)">
                           <span class="fa fa-pencil"> </span> Editar
                       </a>
                       
                   </div>
                   <br>
                   
                   <div class="row">
                        <div class="col-xs-12">

                            <button class="btn botonAgregarAcordion pull-right" ng-click="AgregarPresupuesto(proyecto)" style="font-size: 12pt">
                                <span>
                                    <span class="fa fa-plus"></span>
                                    <span> Nuevo Presupuesto</span> 
                                </span>
                            </button>
                            
                        </div>
                    </div>
                   <!-- Presupuestos -->
                   <div ng-if="proyecto.Presupuesto.length > 0" style="overflow-y: visible !important;" class=""> <!--class="table-responsive"-->
                        <table class="table table-hover table-striped table-condensed">
                            <thead class="TituloTabla">
                              <tr>
                                <th style="width: 70px"><span class=""><b>#</b></span></th>
                                <th><span class=""><b>Título</b></span></th>
                                <th class="text-center" style="width: 30px"><span></span></th>
                              </tr>
                            </thead>
                            <tbody >
                              <tr ng-repeat="presupuesto in GetPresupuestosOrdenados(proyecto.Presupuesto)">

                                 <td>{{presupuesto.PresupuestoId}}</td>
                                 <td>{{presupuesto.Titulo}}</td>

                                <td class="text-center">
                                   <div class="dropdown">
                                        <a  class="BotonOperacion dropdown-toggle" ng-click="EditarContactoAgregado(contacto, 'Ninguno')" data-toggle="dropdown">
                                            <span class="fa fa-ellipsis-v text-center"  style="width: 20px !important; font-size: 14pt"></span>
                                        </a>
                                        <ul class="dropdown-menu dropdown-menu-right dropdownRight" role="menu" style="margin-top: 10px">
                                            <li>
                                                <a class="dropdownOpcionModal" ng-click="VerDetallePresupuesto(presupuesto, proyecto)">
                                                    <span class="fa fa-eye"></span> Detalles
                                                </a>
                                            </li>
                                            
                                            <li>
                                                <a class="dropdownOpcionModal" ng-click="EditarPresupuesto(presupuesto, proyecto)">
                                                    <span class="fa fa-pencil"></span> Editar
                                                </a>
                                            </li>
                                            
                                            <li>
                                                <a class="dropdownOpcionModal" ng-click="ClonarPresupuesto(presupuesto, proyecto)">
                                                    <span class="fa fa-clone"></span> Clonar
                                                </a>
                                            </li>
                                            
                                            <li>
                                                <a class="dropdownOpcionModal" ng-click="UnirPresupuesto(presupuesto, proyecto)">
                                                    <span class="fa fa-link"></span> Unir
                                                </a>
                                            </li>
                                            
                                            <li>
                                                <a class="dropdownOpcionModal" ng-disabled="true"  ng-click="PersonalizarPresupuesto(presupuesto, proyecto)">
                                                    <span class="fa fa-address-book-o"></span> Personalizado
                                                </a>
                                            </li>
                                            
                                        </ul>
                                    </div>
                                </td>

                              </tr>
                            </tbody>
                        </table>
                    </div>
                   
                  <div style="height: 20px;"></div>
               </div>
               
               <div style="margin-top: 10px"></div>
        
            </div>
            <br>
                        
        </div>
    </div>
    
    <!------------------------------------------ Modales ------------------------------------------------------>
    
    <!-- Camabiar Estatus proyecto -->
    <div class="modal fade" id="editarProyectoModal">
        <br>    <br>   <br>
        <div class="modal-dialog modal-md modalPrincipal">
           
           <div class="row">
                <div class="col-xs-12">
                    <button class="btn close cerrarModal" data-dismiss="modal" aria-label="Close" ng-click="CerrarPresupuestoModal()"><span aria-hidden="true">&times;</span></button>
                    <span class="tituloModal">Editar Proyecto</span>
                </div>
            </div>
            <br><br>
            <form name="proyectoForma">
                <!-- Tipo de proyecto -->
                <div class="row">
                    <!-- tipo de proyecto -->
                    <div class="col-sm-6 etiquetaDropdownList">
                         <label>Proyecto*</label>
                         <div class="dropdown" style="margin-top:-5px">

                            <a class="btn entrada disabled" data-toggle="dropdown" style="font-size: 16px; height: 34px; width: 100%; text-align: left">
                                <span>{{nuevoProyecto.TipoProyecto.Nombre}}</span>
                                <span class="caret"></span>
                            </a>

                        </div>
                    </div>

                    <div class="hidden-sm hidden-md hidden-lg"> <br> </div>
                   <!-- nombre -->
                    <div class="col-sm-6">
                       <div class="entrada2">
                            <input type="text" required class="entrada form-control"  name="nombre" ng-model="nuevoProyecto.Nombre" ng-maxlength="120" />
                            <label>Nombre del Proyecto*</label>
                        </div>
                   </div>             
                </div>
                <div class="hidden-sm hidden-md hidden-lg"> <br> </div>

                <!-- Domicilios -->
                <div class="row">
                    <div class="col-xs-12">
                        <a class="btn btn-block botonAcordion textoIzquierda" ng-click="verDireccion = !verDireccion" ng-class="{active: verDireccion}"><!--  -->
                            <span class=" " >
                                <span ng-if="!verDireccion" style="width:20px" class="fa fa-chevron-right"></span>
                                <span ng-if="verDireccion" style="width:20px" class="fa fa-chevron-up"></span>
                                <span> Domicilios</span> 
                            </span>

                        </a>
                    </div>
                </div>

                <div class="row" ng-if="verDireccion">
                    <div class="col-xs-12">
                       <div class="margenDropdownlistContenido">

                            <!-- Domicilios -->
                            <div class="row" ng-if="domicilioPersona.length > 0">
                                <div class="col-xs-12">
                                    <div class="table-responsive TablaModal">
                                        <table class="table table-hover table-striped table-condensed">
                                            <thead class="TituloTabla">
                                              <tr>
                                                <th>Tipo Domicilio</th>
                                                <th>Domicilio</th>
                                                <th class="text-center">Detalles</th>
                                                <th class="text-center">Estado / Municipio</th>
                                                <th class="text-center">Seleccionar </th>
                                              </tr>
                                            </thead>
                                            <tbody >
                                              <tr ng-repeat="domicilio in domicilioPersona | orderBy:['TipoMedioContacto.Nombre'] " ng-show="domicilio.Activo">
                                                <td>{{domicilio.TipoMedioContacto.Nombre}}</td>
                                                <td>{{domicilio.Domicilio}}</td>

                                               <td class="text-center">
                                                    <a  class="BotonOperacion" href=""  ng-click="DetalleDomicilio(domicilio)">
                                                        <span class="fa fa-eye fa-2x"></span>
                                                    </a>
                                                </td>

                                                <td>{{domicilio.Municipio}}, {{domicilio.Estado}}.</td>

                                                <td class="text-center">
                                                    <div class="checkboxOperativo">
                                                        <label>
                                                            <input  ng-model="domicilio.Seleccionado" type="checkbox" value="" ng-click="CambiarDomicilio(domicilio)">
                                                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                                                        </label>
                                                    </div>
                                                </td>
                                              </tr>   

                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </form>


            <br><br>
            <!-------- mensaje de error ---->
            <div class="row">
                <div class="col-xs-12">
                    <div ng-repeat="error in mensajeError">
                        <span class="textoError">{{error}}</span>
                    </div>
                </div>
            </div>
            <br>
            <!---- botones de operacion -->
            <div class="row">
               <div class="col-xs-6">
                    <button class="btn botonOperacionModal btn-block" data-dismiss="modal" aria-label="Close" ng-click="CerrarProyecto()">CANCELAR</button>
                </div>

                <div class="col-xs-6">
                    <button focus class="btn botonOperacionModal btn-block" ng-click="TerminarProyecto(proyectoForma.nombre.$invalid)">TERMINAR</button>
                </div>
            </div>
                        
        </div>
    </div>
    
    <!-- Camabiar Estatus proyecto -->
    <div class="modal fade" id="modalEstatusProyecto">
        <br>    <br>   <br>
        <div class="modal-dialog modal-sm modalPrincipal text-center">
           
            <div class="row">
                <div class="col-xs-12">
                    <span style="font-size:14pt">{{mensajeAdvertencia}}</span>
                </div>
            </div>
            <br><br>
            <div class="row">
                <div class="col-xs-6">
                    <button class="btn botonOperacionModal btn-block" data-dismiss="modal" aria-label="Close" ng-click="CancelarEstatusProyecto()">No</button>
                </div>
                <div class="col-xs-6">
                    <button class="btn botonOperacionModal btn-block" data-dismiss="modal" aria-label="Close" ng-click="ConfirmarActualizarProyecto()">Si</button>
                </div>
            </div>
                        
        </div>
    </div>
    
    <!-- Detalles Presupuesto -->
    <div class="modal fade sombraDivModal" id="presupuestoDetalleModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" >
        <br>    <br>   <br>
        <div class="modal-dialog modalPrincipal">
           
            <div class="row">
                <div class="col-xs-12">
                    <button class="btn close cerrarModal" data-dismiss="modal" aria-label="Close" ng-click="CerrarDireccionModal()"><span aria-hidden="true">&times;</span></button>
                    <span  class="tituloModal">Detalles Presupuesto</span>
                </div>
            </div>
        
            <br><br>
            
            <div class="row">
                
                <div class="col-sm-12">
                   <!--Cliente-->
                    <span>
                        <b>Cliente: </b> <span>{{detalle.Persona.Nombre}} {{detalle.Persona.PrimerApellido}} {{detalle.Persona.SegundoApellido}}</span>
                    </span><br>
                    <!-- Proyecto -->
                    <span>
                        <b>Proyecto: </b> <span>{{detalle.Proyecto.TipoProyecto.Nombre}} - {{detalle.Proyecto.Nombre}}</span>
                    </span><br>
                    <!-- Dirección del proyecto -->
                    <span ng-if="detalle.Proyecto.Domicilio.DireccionPersonaId.length > 0">
                        <b>Dirección: </b> <span>{{detalle.Proyecto.Domicilio.Domicilio}}, {{detalle.Proyecto.Domicilio.Colonia}}. {{detalle.Proyecto.Domicilio.Ciudad}}, {{detalle.Proyecto.Domicilio.Estado}}. C.P. {{detalle.Proyecto.Domicilio.Codigo}}</span><br>
                    </span>
                    <!-- Colaborador -->
                    <span>
                        <b>Realizado Por: </b> <span>{{detalle.NombreColaborador}}</span>
                    </span><br>
                    
                    <br>
                    <!-- Presupuesto -->
                    <span>
                        <b>No. </b> <span>{{detalle.PresupuestoId}} - </span>
                        <span>{{detalle.Titulo}}</span>
                        <span class="pull-right"><b>Fecha Creación:</b> <span>{{detalle.FechaCreacion}}</span></span>
                        <br>
                    </span>
                    
                </div>
            </div>
            <br>
        
            <div class="row">
                <div class="col-xs-12">
                   
                    <div class="divisorGis1"> </div>
                    
                    <button class="btn btn-block btnDetallePresupuesto" ng-click="verDetalle.desCliente = !verDetalle.desCliente">
                        <span class="fa fa-chevron-right" style="width:20px;" ng-if="!verDetalle.desCliente"></span>
                        <span class="fa fa-chevron-up" style="width:20px;" ng-if="verDetalle.desCliente"></span>
                        <span>Descipción Cliente</span>
                    </button>
                    
                    <span ng-if="verDetalle.desCliente">
                        <span>{{detalle.DescripcionCliente}}</span>
                    </span>
                    
                    <div class="divisorGis1"> </div>
                    
                </div>
            </div>
    
                   
            <div class="row" ng-if="detalle.DescripcionInterna.length > 0">
                <div class="col-xs-12">
                  
                  <div style="height: 10px"></div>
                   
                    <div class="divisorGis1"> </div>
                    
                    <button class="btn btn-block btnDetallePresupuesto" ng-click="verDetalle.desInterna = !verDetalle.desInterna">
                        <span class="fa fa-chevron-right" style="width:20px;" ng-if="!verDetalle.desInterna"></span>
                        <span class="fa fa-chevron-up" style="width:20px;" ng-if="verDetalle.desInterna"></span>
                        <span>Descipción Interna</span>
                    </button>
                    
                    <span ng-if="verDetalle.desInterna">
                        <span>{{detalle.DescripcionInterna}}</span>
                    </span>
                    
                    <div class="divisorGis1"> </div>
                    
                </div>
            </div>
            
            <!-- Combinaciones y cubiertas -->
            <div class="row" ng-if="detalle.CombinacionMaterial.length > 0 || detalle.TipoCubierta.length > 0">
                <div class="col-xs-12">
                  
                    <div style="height: 10px"></div>
                   
                    <div class="divisorGis1"> </div>
                    
                    <button class="btn btn-block btnDetallePresupuesto" ng-click="verDetalle.combinacion = !verDetalle.combinacion">
                        <span class="fa fa-chevron-right" style="width:20px;" ng-if="!verDetalle.combinacion"></span>
                        <span class="fa fa-chevron-up" style="width:20px;" ng-if="verDetalle.combinacion"></span>
                        <span>Combinaciones y Cubiertas</span>
                    </button>
                    
                    <span ng-if="verDetalle.combinacion">
                       <div class="row">
                            <!-- Cocina Integral -->
                            <div class="col-sm-6" ng-if="detalle.CombinacionMaterial.length > 0">
                               
                                <div class="tituloOpcionPresupuesto">
                                    <span class="textoTituloOpcionPresupuesto" style="font-size:12pt;"> Combinaciones</span>
                                </div>
                                <div class="panelItemPresupuesto">
                                    <div class="row">
                                       <div class="col-xs-12">

                                            <div ng-repeat="combinacion in detalle.CombinacionMaterial | orderBy:'Nombre'">
                                                <div class=" itemPresupuesto" style="margin-left: 0px" ng-class="{itemPresupuestoPrimero: $first}">
                                                    <span style="width:100%">
                                                        <span>{{combinacion.Nombre}}</span>
                                                    </span>
                                                </div>
                                            </div>

                                       </div>
                                   </div>

                                </div>
                                
                                <div style="height: 10px"></div>
                             </div>
                             
                             <!-- Cubiertas -->
                            <div class="col-sm-6" ng-if="detalle.TipoCubierta.length > 0">
                               
                                <div class="tituloOpcionPresupuesto">
                                    <span class="textoTituloOpcionPresupuesto" style="font-size:12pt;"> Cubiertas</span>
                                </div>
                                <div class="panelItemPresupuesto">
                                    <div class="row">
                                       <div class="col-xs-12">

                                            <div ng-repeat="cubierta in detalle.TipoCubierta | orderBy:'TipoCubiertaId'">
                                                <div class=" itemPresupuesto" style="margin-left: 0px" ng-class="{itemPresupuestoPrimero: $first}">
                                                    <span style="width:100%">
                                                        <span>{{cubierta.Nombre}}</span>
                                                    </span>
                                                </div>
                                            </div>

                                       </div>
                                   </div>

                                </div>
                                
                                <div style="height: 10px"></div>
                             </div>
                       </div>
                        
                    </span>
                    
                    <div class="divisorGis1"> </div>
                    
                </div>
            </div> 
            
            <!-- Modulos -->
            <div class="row" ng-if="detalle.Modulo.length > 0">
                <div class="col-xs-12">
                  
                  <div style="height: 10px"></div>
                   
                    <div class="divisorGis1"> </div>
                    
                    <button class="btn btn-block btnDetallePresupuesto" ng-click="verDetalle.modulo = !verDetalle.modulo">
                        <span class="fa fa-chevron-right" style="width:20px;" ng-if="!verDetalle.modulo"></span>
                        <span class="fa fa-chevron-up" style="width:20px;" ng-if="verDetalle.modulo"></span>
                        <span>Módulos</span>
                    </button>
                    
                    <div class="table-responsive" ng-if="verDetalle.modulo">
                        <table class="table table-hover table-striped table-condensed">
                            <thead class="TituloTabla">
                              <tr>
                                <th><span class=""><b>Módulo</b></span></th>
                                <th class="text-center"><span class=""><b>Ancho</b></span></th>
                                <th class="text-center"><span><b>Alto</b></span></th>
                                <th class="text-center"><span><b>Profundo</b></span></th>
                                <th class="text-center"><span><b>Cantidad</b></span></th>
                              </tr>
                            </thead>
                            <tbody >
                              <tr ng-repeat="modulo in detalle.Modulo | orderBy:['NombreTipoModulo', 'Nombre']">

                                 <td>{{modulo.NombreTipoModulo}} - {{modulo.Nombre}}</td>
                                 <td class="text-center">{{modulo.Ancho}}</td>
                                 <td class="text-center">{{modulo.Alto}}</td>
                                 <td class="text-center">{{modulo.Profundo}}</td>
                                 <td class="text-center">{{modulo.Cantidad}}</td>

                              </tr>
                            </tbody>
                        </table>
                    </div>
                    
                    <div class="row" ng-if="verDetalle.modulo">
                        <div class="col-xs-6 col-sm-4" ng-repeat="combinacion in detalle.CombinacionMaterial">
                            <span >
                                <b>{{combinacion.Nombre}}: </b><span>{{combinacion.PrecioVenta | currency}}</span>
                            </span>
                        </div>
                    </div>            
                     
                    <div class="divisorGis1"> </div>
                    
                </div>
            </div>
            
            <!-- Puertas -->
            <div class="row" ng-if="detalle.Puerta.length > 0">
                <div class="col-xs-12">
                  
                  <div style="height: 10px"></div>
                   
                    <div class="divisorGis1"> </div>
                    
                    <button class="btn btn-block btnDetallePresupuesto" ng-click="verDetalle.puerta = !verDetalle.puerta">
                        <span class="fa fa-chevron-right" style="width:20px;" ng-if="!verDetalle.puerta"></span>
                        <span class="fa fa-chevron-up" style="width:20px;" ng-if="verDetalle.puerta"></span>
                        <span>Puertas</span>
                    </button>
                    
                    <div class="row" ng-if="verDetalle.puerta">
                        <div class="col-sm-6" ng-repeat="puerta in detalle.Puerta | orderBy:'Nombre'">

                            <div class="tituloOpcionPresupuesto">
                                <span style="font-size:12pt;"> {{puerta.Nombre}}</span>
                            </div>
                            <div class="panelItemPresupuesto">
                                <div class="row">
                                   <div class="col-xs-12">

                                        <div ng-repeat="combinacion in puerta.Combinacion">
                                            <div class=" itemPresupuesto" style="margin-left: 0px" ng-class="{itemPresupuestoPrimero: $first}">
                                                <span style="width:100%">
                                                    <span>{{combinacion.Nombre}}</span>
                                                    <span class="pull-right">{{combinacion.PrecioVenta | currency}}</span>
                                                </span>
                                            </div>
                                        </div>

                                   </div>
                               </div>

                            </div>

                            <div style="height: 10px"></div>
                         </div>
                     </div>
                     
                    <div class="divisorGis1"> </div>
                    
                </div>
            </div>
            
            <!-- Servicios -->
            <div class="row" ng-if="detalle.Servicio.length > 0">
                <div class="col-xs-12">
                  
                  <div style="height: 10px"></div>
                   
                    <div class="divisorGis1"> </div>
                    
                    <button class="btn btn-block btnDetallePresupuesto" ng-click="verDetalle.servicio = !verDetalle.servicio">
                        <span class="fa fa-chevron-right" style="width:20px;" ng-if="!verDetalle.servicio"></span>
                        <span class="fa fa-chevron-up" style="width:20px;" ng-if="verDetalle.servicio"></span>
                        <span>Servicios</span>
                    </button>
                    
                    <div class="table-responsive" ng-if="verDetalle.servicio">
                        <table class="table table-hover table-striped table-condensed">
                            <thead class="TituloTabla">
                              <tr>
                                <th><span class=""><b>Servicio</b></span></th>
                                <th><span><b>Cantidad</b></span></th>
                                <th><span><b>Precio</b></span></th>
                              </tr>
                            </thead>
                            <tbody >
                              <tr ng-repeat="servicio in detalle.Servicio | orderBy:['Nombre']">

                                 <td>{{servicio.Nombre}}</td>
                                 <td>{{servicio.Cantidad}}</td>
                                 <td >{{servicio.PrecioVenta | currency}}</td>

                              </tr>
                            </tbody>
                        </table>
                    </div>    
                     
                    <div class="divisorGis1"> </div>
                    
                </div>
            </div>
            
            <!-- Maqueo -->
            <div class="row" ng-if="detalle.Maqueo.length > 0">
                <div class="col-xs-12">
                  
                  <div style="height: 10px"></div>
                   
                    <div class="divisorGis1"> </div>
                    
                    <button class="btn btn-block btnDetallePresupuesto" ng-click="verDetalle.maqueo = !verDetalle.maqueo">
                        <span class="fa fa-chevron-right" style="width:20px;" ng-if="!verDetalle.maqueo"></span>
                        <span class="fa fa-chevron-up" style="width:20px;" ng-if="verDetalle.maqueo"></span>
                        <span>Maqueo</span>
                    </button>
                    
                    <div ng-if="verDetalle.maqueo">
                        <b>Cantidad: </b> <span>{{detalle.CantidadMaqueo}}</span>
                    </div>
                    
                    <div class="table-responsive" ng-if="verDetalle.maqueo">
                        <table class="table table-hover table-striped table-condensed">
                            <thead class="TituloTabla">
                              <tr>
                                <th><span class=""><b>Maqueo</b></span></th>
                                <th><span><b>Precio</b></span></th>
                              </tr>
                            </thead>
                            <tbody >
                              <tr ng-repeat="maqueo in detalle.Maqueo">

                                 <td>{{maqueo.Nombre}}</td>
                                 <td >{{maqueo.PrecioVenta | currency}}</td>

                              </tr>
                            </tbody>
                        </table>
                    </div>    
                     
                    <div class="divisorGis1"> </div>
                    
                </div>
            </div>
            
            <!-- Accesorio -->
            <div class="row" ng-if="detalle.Accesorio.length > 0">
                <div class="col-xs-12">
                  
                  <div style="height: 10px"></div>
                   
                    <div class="divisorGis1"> </div>
                    
                    <button class="btn btn-block btnDetallePresupuesto" ng-click="verDetalle.accesorio = !verDetalle.accesorio">
                        <span class="fa fa-chevron-right" style="width:20px;" ng-if="!verDetalle.accesorio"></span>
                        <span class="fa fa-chevron-up" style="width:20px;" ng-if="verDetalle.accesorio"></span>
                        <span>Accesorios</span>
                    </button>
                    
                    <div class="row" ng-if="verDetalle.accesorio">
                        <div class="col-sm-12" ng-repeat="accesorio in detalle.Accesorio | orderBy:'Nombre'">
                            
                            <span class="tituloOptPresupuesto" style="font-size: 14pt">{{accesorio.Cantidad}} {{accesorio.Nombre}}  </span>
                            
                            <!-- Accesorio Normal -->
                            <div class="table-responsive" ng-if="accesorio.ClaseAccesorioId == '1'">
                                <table class="table table-hover table-striped table-condensed">
                                    <thead class="TituloTabla">
                                      <tr>
                                        <th><span class=""><b>Muestarario</b></span></th>
                                        <th><span><b>Precio</b></span></th>
                                      </tr>
                                    </thead>
                                    <tbody >
                                      <tr ng-repeat="muestrario in accesorio.Muestrario">

                                         <td>{{muestrario.Nombre}}</td>
                                         <td >{{muestrario.PrecioVenta | currency}}</td>

                                      </tr>
                                    </tbody>
                                </table>
                               
                            </div> 
                            
                            
                            <!-- accesorio de Madera -->
                            <div class="row" ng-if="accesorio.ClaseAccesorioId == '2'" >
                                <div class="col-sm-6" ng-repeat="muestrario in accesorio.Muestrario | orderBy:'Nombre'">
                                    <div class="tituloOpcionPresupuesto">
                                        <span class="textoTituloOpcionPresupuesto" style="font-size:12pt;"> {{muestrario.Nombre}}</span>
                                    </div>
                                    <div class="panelItemPresupuesto">
                                        <div class="row">
                                           <div class="col-xs-12">

                                                <div ng-repeat="combinacion in muestrario.Combinacion">
                                                    <div class=" itemPresupuesto" style="margin-left: 0px" ng-class="{itemPresupuestoPrimero: $first}">
                                                        <span style="width:100%">
                                                            <span>{{combinacion.Nombre}}</span>
                                                            <span class="pull-right">{{combinacion.PrecioVenta | currency}}</span>
                                                        </span>
                                                    </div>
                                                </div>

                                           </div>
                                       </div>

                                    </div>
                                    
                                    <div style="height: 10px"></div>
                                </div>
                                
                            </div>
                            
                            
                            <div ng-if="accesorio.ClaseAccesorioId == '2'" >
                                <div style="height: 10px"></div>
                            </div>

                         </div>
                     </div>
                     
                    <div class="divisorGis1"> </div>
                    
                </div>
            </div>
            
            <!-- Cubierta de aglomerado -->
            <div class="row" ng-if="verTipoCubierta.aglomerado">
                <div class="col-xs-12">
                  
                  <div style="height: 10px"></div>
                   
                    <div class="divisorGis1"> </div>
                    
                    <button class="btn btn-block btnDetallePresupuesto" ng-click="verDetalle.cubiertaAglomerado= !verDetalle.cubiertaAglomerado">
                        <span class="fa fa-chevron-right" style="width:20px;" ng-if="!verDetalle.cubiertaAglomerado"></span>
                        <span class="fa fa-chevron-up" style="width:20px;" ng-if="verDetalle.cubiertaAglomerado"></span>
                        <span>Cubierta de Aglomerado</span>
                    </button>
                    
                    <div ng-if="verDetalle.cubiertaAglomerado" >
                        <div ng-repeat="tipo in detalle.TipoCubierta" ng-if="tipo.TipoCubiertaId == '1'">
                           
                           <div class="table-responsive">
                                <table class="table table-hover table-striped table-condensed">
                                    <thead class="TituloTabla">
                                      <tr>
                                        <th><span><b>Material</b></span></th>
                                        <th ng-repeat="ubicacion in tipo.Ubicacion | orderBy:'UbicacionCubiertaId'"><span><b>{{ubicacion.Nombre}}</b></span></th>
                                      </tr>
                                    </thead>
                                    <tbody >
                                      <tr ng-repeat="material in tipo.Material | orderBy:['NombreMaterial', 'NombreGrupo']">

                                         <td>{{material.NombreMaterial}} - {{material.NombreGrupo}}</td>
                                         <td ng-repeat="ubicacion in material.Ubicacion | orderBy:'UbicacionCubiertaId'" > <!-- ng-class="{cubiertaNoDiponible : ubicacion.PrecioVenta == 'No Disponible'}" -->
                                             <span ng-if="ubicacion.PrecioVenta != 'No Disponible'">{{ubicacion.PrecioVenta | currency}}</span>
                                             <div ng-if="ubicacion.PrecioVenta == 'No Disponible'" class="cubiertaNoDiponible"></div>
                                        </td>

                                      </tr>
                                    </tbody>
                                </table>
                           </div>
                           
                            <div class="table-responsive">
                                <table class="table table-hover table-striped table-condensed">
                                    <thead class="TituloTabla">
                                      <tr>
                                        <th><span><b>Ubicación</b></span></th>
                                        <th class="text-center"><span><b>Cantidad</b></span></th>
                                      </tr>
                                    </thead>
                                    <tbody >
                                      <tr ng-repeat="ubicacion in tipo.Ubicacion | orderBy:'UbicacionCubiertaId'">

                                         <td>{{ubicacion.Nombre}}</td>
                                         <td class="text-center">{{ubicacion.Cantidad}}</td>

                                      </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>    
                     
                    <div class="divisorGis1"> </div>
                    
                </div>
            </div>
            
            <!-- Cubierta de piedra -->
            <div class="row" ng-if="verTipoCubierta.piedra">
                <div class="col-xs-12">
                  
                  <div style="height: 10px"></div>
                   
                    <div class="divisorGis1"> </div>
                    
                    <button class="btn btn-block btnDetallePresupuesto" ng-click="verDetalle.cubiertaPiedra= !verDetalle.cubiertaPiedra">
                        <span class="fa fa-chevron-right" style="width:20px;" ng-if="!verDetalle.cubiertaPiedra"></span>
                        <span class="fa fa-chevron-up" style="width:20px;" ng-if="verDetalle.cubiertaPiedra"></span>
                        <span>Cubierta de Piedra</span>
                    </button>
                    
                    <div ng-if="verDetalle.cubiertaPiedra" >
                       
                        <div ng-repeat="tipo in detalle.TipoCubierta" ng-if="tipo.TipoCubiertaId == '2'">
                          
                          
                           <div class="table-responsive">
                                <table class="table table-hover table-striped table-condensed">
                                    <thead class="TituloTabla">
                                      <tr>
                                        <th><span><b>Material</b></span></th>
                                        <th ng-repeat="ubicacion in tipo.Ubicacion | orderBy:'UbicacionCubiertaId'"><span><b>{{ubicacion.Nombre}}</b></span></th>
                                      </tr>
                                    </thead>
                                    <tbody >
                                      <tr ng-repeat="material in tipo.Material | orderBy:['NombreMaterial', 'NombreGrupo']">

                                         <td>{{material.NombreMaterial}} - {{material.NombreGrupo}}</td>
                                         <td ng-repeat="ubicacion in material.Ubicacion | orderBy:'UbicacionCubiertaId'">{{ubicacion.PrecioVenta | currency}}</td>

                                      </tr>
                                    </tbody>
                                </table>
                           </div>
                          
                           <div ng-repeat="ubicacion in tipo.Ubicacion | orderBy:'UbicacionCubiertaId'">
                              
                               <div>
                                   <b>{{ubicacion.Nombre}}</b> - {{ubicacion.Seccion.length}}
                                   <span ng-if="ubicacion.Seccion.length > 1">Secciones</span>
                                   <span ng-if="ubicacion.Seccion.length == 1">Sección</span>
                                </div>
                              
                               <div class="table-responsive">
                                    <table class="table table-hover table-striped table-condensed">
                                        <thead class="TituloTabla">
                                          <tr>
                                            <th><span><b>Lado 1 (pulg)</b></span></th>
                                            <th><span><b>Lado 2 (pulg)</b></span></th>
                                          </tr>
                                        </thead>
                                        <tbody >
                                          <tr ng-repeat="seccion in ubicacion.Seccion">

                                             <td>{{seccion.Lado1}}</td>
                                             <td>{{seccion.Lado2}}</td>

                                          </tr>
                                        </tbody>
                                    </table>
                                </div>
                           </div>
                           
                        </div>
                        
                    </div>    
                     
                    <div class="divisorGis1"> </div>
                    
                </div>
            </div>
            
            <!-- Promociones -->
            <div class="row" ng-if="(detalle.PromocionMueble.length + detalle.PromocionCubierta.length) > 0">
                <div class="col-xs-12">
                  
                  <div style="height: 10px"></div>
                   
                    <div class="divisorGis1"> </div>
                    
                    <button class="btn btn-block btnDetallePresupuesto" ng-click="verDetalle.promocion = !verDetalle.promocion">
                        <span class="fa fa-chevron-right" style="width:20px;" ng-if="!verDetalle.promocion"></span>
                        <span class="fa fa-chevron-up" style="width:20px;" ng-if="verDetalle.promocion"></span>
                        <span>Promociones</span>
                    </button>
                    
                    <div ng-if="verDetalle.promocion && detalle.PromocionMueble.length > 0">
                        <div>
                            <b>Muebles</b>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-hover table-striped table-condensed">
                                <thead class="TituloTabla">
                                  <tr>
                                    <th><span class=""><b>Promoción</b></span></th>
                                    <th><span><b>Vigencia</b></span></th>
                                  </tr>
                                </thead>
                                <tbody >
                                  <tr ng-repeat="promo in detalle.PromocionMueble">

                                     <td>
                                         <span ng-if="promo.TipoPromocionId == '2'">{{promo.NumeroPagos}} meses sin intereses</span>
                                         <span ng-if="promo.TipoPromocionId != '2'">{{promo.DescuentoMinimo}}% de descuento</span>
                                    </td>
                                    <td >{{promo.FechaLimite}}</td>

                                  </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <div ng-if="verDetalle.promocion && detalle.PromocionCubierta.length > 0">
                        
                        <div>
                            <b>Cubiertas</b>
                        </div>

                        <div class="table-responsive">
                            <table class="table table-hover table-striped table-condensed">
                                <thead class="TituloTabla">
                                  <tr>
                                    <th><span class=""><b>Promoción</b></span></th>
                                    <th><span><b>Vigencia</b></span></th>
                                  </tr>
                                </thead>
                                <tbody >
                                  <tr ng-repeat="promo in detalle.PromocionCubierta">

                                     <td>
                                         <span ng-if="promo.TipoPromocionId == '2'">{{promo.NumeroPagos}} meses sin intereses</span>
                                         <span ng-if="promo.TipoPromocionId != '2'">{{promo.DescuentoMinimo}}% de descuento</span>
                                    </td>
                                    <td >{{promo.FechaLimite}}</td>

                                  </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>   
                     
                    <div class="divisorGis1"> </div>
                    
                </div>
            </div>
        
        </div>
    </div>
    
    
</div>

     