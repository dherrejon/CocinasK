<div ng-controller="ProyectoControlador as proyecto">

     <!-- Modal para mensajes -->
    <div class="modal fade" id="agregarPresupuestoModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" data-keyboard="true" data-backdrop="static">
        <br>    <br>   <br>
        <div class="modal-dialog modal-lg modalPrincipal" >
           
            <div class="row">
                <div class="col-xs-12">
                    <button class="btn close cerrarModal" data-dismiss="modal" aria-label="Close" ng-click="CerrarPresupuestoModal()"><span aria-hidden="true">&times;</span></button>
                    <span ng-if="operacion == 'Agregar'" class="tituloModal">Agregar Presupuesto</span>
                    <span ng-if="operacion == 'Editar'" class="tituloModal">Editar Presupuesto</span>
                </div>
            </div>
            <br><br>
            
            <!-- Paso 1 -->
            <form name="presupuesto1Forma" ng-show="pasoPresupuesto == 1">
                <!-- nombre -->
                <div class="row"> 
                    <div class="col-sm-12">
                       <div class="entrada2">
                            <input autocomplete="off" ng-disabled=" personaSeleccionada" ng-pattern="erNombrePersonal" ng-blur="GoToPeople()" type="text" required class="{{clasePresupuesto.paso1.nombre}} form-control" name="nombre" ng-model="presupuesto.Persona.Nombre" ng-maxlength="255"/>
                            <label>Nombre*</label>
                        </div>
                   </div>             
                </div>
                <br><br>
                <!-- Apellidos -->
                <div class="row"> 
                    <div class="col-sm-6">
                       <div class="entrada2">
                            <input autocomplete="off" ng-disabled=" personaSeleccionada" ng-pattern="erNombrePersonal" ng-blur="GoToPeople()" type="text" required class="{{clasePresupuesto.paso1.apellido1}} form-control" name="apellido1" ng-model="presupuesto.Persona.PrimerApellido" ng-maxlength="120"/>
                            <label>Primer Apellido*</label>
                        </div>
                   </div>
                   
                   <div class="hidden-sm hidden-md hidden-lg"> <br><br> </div>   
                   
                   <div class="col-sm-6">
                       <div class="entrada2">
                            <input autocomplete="off" ng-disabled=" personaSeleccionada" type="text" class="{{clasePresupuesto.paso1.apellido2}} form-control" name="apellido2" ng-model="presupuesto.Persona.SegundoApellido" ng-maxlength="120"/>
                            <label>Segundo Apellido</label>
                        </div>
                   </div>       
                </div>
                <br><br>
                <!-- Medio de captación -->
                <div class="row">
                  
                    <div class="col-sm-6 etiquetaDropdownList">
                         <label>Medio de captación*</label>
                         <div class="dropdown">

                            <button ng-disabled=" personaSeleccionada" class="dropdown-toggle  {{clasePresupuesto.paso1.captacion}} " data-toggle="dropdown">
                                <span>{{presupuesto.Persona.MedioCaptacion.Nombre}}</span>
                                <span class="caret"></span>
                            </button>
                            
                            <ul class="dropdown-menu listaOpcionesDropdownList " >
                               <li>
                                    <a  href="" class="dropdownOpcionModal" ng-click="CambiarMedioCaptacion('otro')">
                                        <span class="text-center"> OTRO </span>
                                    </a>
                                </li>
                                
                                <li ng-repeat="medio in medioCaptacion | orderBy:'Nombre'">
                                    <a  href="" class="dropdownOpcionModal" ng-click="CambiarMedioCaptacion(medio)" ng-show="medio.Activo && medio.MedioCaptacionId != '0'">
                                        <span>{{medio.Nombre}}</span>
                                    </a>
                                </li>
                            </ul>

                        </div>
                    </div>
                        
                    <div ng-if="presupuesto.Persona.MedioCaptacion.MedioCaptacionId == '0'" class="hidden-sm hidden-md hidden-lg"> <br> </div>
                   
                    <div class="col-sm-6" ng-if="presupuesto.Persona.MedioCaptacion.MedioCaptacionId == '0'">
                       <div class="entrada2">
                            <input ng-disabled=" personaSeleccionada"  ng-pattern="erNombreGeneral" type="text" required class="{{clasePresupuesto.paso1.otro}} form-control" name="nombreMedioCaptacion" ng-model="presupuesto.Persona.NombreMedioCaptacion" ng-maxlength="120"/>
                            <label>Nombre Medio de Captación*</label>
                        </div>
                   </div>             
                </div>

                <!-- UnidadNegocio -->
                <!--  -->
                <div class="row">
                    <div class="col-xs-12">
                        <a class="btn btn-block botonAcordion textoIzquierda {{GetClaseDropdown(mostrarContenido.unidad)}}" ng-class="{disabled: (presupuesto1Forma.nombre.$invalid || presupuesto1Forma.apellido1.$invalid)}" ng-click="MostrarContenido('unidad')" ng-show="permisoOperativo.verTodosCliente"><!--  -->
                            
                            <span  class="">
                                <span ng-show="!mostrarContenido.unidad" style="width:20px;" class="fa fa-chevron-right"></span>
                                <span ng-show="mostrarContenido.unidad" style="width:20px;" class="fa fa-chevron-up"></span>
                               
                                <span> Unidades de Negocio</span> 
                            </span>
                            
                        </a>
                    </div>
                    
                </div>
                
                <div class="row" ng-if="mostrarContenido.unidad" >
                    <div class="col-xs-12">
                        <div class="margenDropdownlistContenido">
                            <div class="row" >
                               <br>
                                <div class="col-xs-12" >
                                    Selecciona una unidad de negocio
                                    <div class="panel panelOpciones tablaResponsable" >
                                        <table class="table table-hover table-responsive table-striped table-condensed">
                                          <tbody  style="cursor: pointer">
                                            <tr ng-repeat="unidad in unidadNegocio | orderBy:'Nombre'" ng-show="unidad.show && unidad.Activo == '1'">
                                              <td>
                                                  {{unidad.NombreTipoUnidadNegocio}} - {{unidad.Nombre}}

                                                   <a class="pull-right BotonOperacion text-center" href="" style="font-size:16pt" ng-click="AgregarUnidadNegocio(unidad)">
                                                        <span class="fa fa-plus "></span>
                                                    </a>

                                              </td>
                                            </tr>
                                          </tbody>
                                        </table>
                                    </div>

                                </div> 
                            </div>

                            <!-- unidades de negocio agregadas -->
                            <div class="row" ng-if="presupuesto.Persona.UnidadNegocio.length > 0">
                                <div class="col-xs-12">
                                    <div class="table-responsive TablaModal">
                                        <table class="table table-hover table-striped table-condensed">
                                            <thead class="TituloTabla">
                                              <tr>
                                                <th>Unidad Negocio</th>
                                                <th class="text-center">Quitar </th>
                                              </tr>
                                            </thead>
                                            <tbody >
                                              <tr ng-repeat="unidad in presupuesto.Persona.UnidadNegocio | orderBy:['NombreTipoUnidadNegocio','Nombre'] ">
                                                <td>{{unidad.NombreTipoUnidadNegocio}} - {{unidad.Nombre}}</td>

                                                <td class="text-center">
                                                    <a  class="BotonOperacion" href=""  ng-click="QuitarUnidadNegocio(unidad)">
                                                        <span class="fa fa-times fa-2x"></span>
                                                    </a>
                                                </td>

                                              </tr>   

                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>


                        </div>   
                    </div>
                </div>
                <br><br ng-if="mostrarResponsable">
            
                
                <!-- Medios de contacto -->
                <div class="row">
                    <div class="col-xs-12">
                        <a class="btn btn-block botonAcordion textoIzquierda {{GetClaseDropdown(mostrarContenido.contacto)}}" ng-click="MostrarContenido('contacto')" ng-class="{disabled: (presupuesto1Forma.nombre.$invalid || presupuesto1Forma.apellido1.$invalid)}"><!--  -->
                            <span class="">
                                <span ng-show="!mostrarContenido.contacto" style="width:20px" class="fa fa-chevron-right"></span>
                                <span ng-show="mostrarContenido.contacto" style="width:20px" class="fa fa-chevron-up"></span>
                                <span> Medio de contacto</span>     
                            </span>
                            
                        </a>
                    </div>
                    
                </div>
                
                <div class="row" ng-if="mostrarContenido.contacto && (!presupuesto1Forma.nombre.$invalid && !presupuesto1Forma.apellido1.$invalid)">
                    <div class="col-xs-12">
                        <div class="margenDropdownlistContenido">
                        
                           <div class="row">
                               <div class="col-xs-12">
                                    <a class="btn botonAgregarAcordion pull-right" ng-click="AgregarMedioContacto()" >
                                        <span>
                                            <span class="fa fa-plus"></span>
                                            <span> Nuevo</span> 
                                        </span>
                                    </a>
                               </div>
                            </div>

                            <!-- Medios de contacto agregados -->
                            <div class="row" ng-if="presupuesto.Persona.Contacto.length +  presupuesto.Persona.NuevoContacto.length > 0">
                                <div class="col-xs-12">
                                    <div class="table-responsive TablaModal">
                                        <table class="table table-hover table-striped table-condensed">
                                            <thead class="TituloTabla">
                                              <tr>
                                                <th>Medio de Contacto</th>
                                                <th>Tipo </th>
                                                <th>Contacto </th>
                                                <th class="text-center">Editar</th>
                                                <th class="text-center">Quitar </th>
                                              </tr>
                                            </thead>
                                            <tbody >
                                              <tr ng-repeat="contacto in presupuesto.Persona.Contacto | orderBy:['MedioContacto.Nombre','TipoMedioContacto.Nombre'] " ng-show="contacto.Activo && MostrarMedioContacto(contacto.TipoMedioContacto.TipoMedioContactoId)">
                                                <td>{{contacto.MedioContacto.Nombre}}</td>
                                                <td>{{contacto.TipoMedioContacto.Nombre}}</td>


                                                <td ng-if="contacto.MedioContacto.MedioContactoId == '2'">{{contacto.Contacto | tel}}</td>
                                                <td ng-if="contacto.MedioContacto.MedioContactoId == '1'">{{contacto.Contacto}}</td>

                                                <td class="text-center">
                                                    <a  class="BotonOperacion" href="" data-toggle="modal" data-target="#" ng-click="EditarContactoAgregado(contacto,'Registrado')" >
                                                        <span class="fa fa-pencil fa-2x"></span>
                                                    </a>
                                                </td>

                                                <td class="text-center">
                                                    <!--<a  disabled class="BotonOperacion" href="" data-toggle="modal" data-target="#" ng-click="AbrirModalEliminarContacto(telefono)">
                                                        <span class="fa fa-times fa-2x"></span>
                                                    </a>-->
                                                </td>
                                              </tr>

                                              <!-- medios agregados sin registro en la base de datos -->
                                              <tr ng-repeat="contacto in presupuesto.Persona.NuevoContacto | orderBy:['MedioContacto.Nombre', 'TipoMedioContacto.Nombre'] ">
                                                <td>{{contacto.MedioContacto.Nombre}}</td>
                                                <td>{{contacto.TipoMedioContacto.Nombre}}</td>

                                                  <td ng-if="contacto.MedioContacto.MedioContactoId == '2'">{{contacto.Contacto | tel}}</td>
                                                  <td ng-if="contacto.MedioContacto.MedioContactoId == '1'">{{contacto.Contacto}}</td>

                                                <td class="text-center">
                                                    <a  class="BotonOperacion" href=""  ng-click="EditarContactoAgregado(contacto, 'Nuevo')">
                                                        <span class="fa fa-pencil fa-2x"></span>
                                                    </a>
                                                </td>

                                                <td class="text-center">
                                                    <a  class="BotonOperacion" href=""  ng-click="BorrarContactoAgregado(contacto)">
                                                        <span class="fa fa-times fa-2x"></span>
                                                    </a>
                                                </td>
                                              </tr>    

                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <br>
                
                <!-- Personas relacionadas -->
                <div class="row" ng-if="persona.length > 0">
                    <div class="col-xs-12">
                        <span>*Verificar si es uno de estos clientes.</span><br>
                        <span>*Si es uno de estos clientes selecciónalo y presiona siguiente.</span><br>
                    </div>
                    <br>
                   <div class="col-xs-12">
                        <div class="piezaPorComponenteTabla">
                            <table class="table table-hover table-striped table-condensed">
                                <thead class="TituloTabla">
                                  <tr>
                                    <th><span class=""><b>Nombre</b></span></th>
                                    <th class="text-center"><span><b>Seleccionar</b></span></th>
                                  </tr>
                                </thead>
                                <tbody >
                                  <tr ng-repeat="persona in persona | orderBy:'PrimerApellido'">

                                     <td>{{persona.PrimerApellido}} {{persona.SegundoApellido}} {{persona.Nombre}}</td>
                                    

                                    <td class="text-center">
                                        <div class="checkboxOperativo">
                                            <label>
                                                <input  ng-model="persona.Seleccionado" type="checkbox" value="" ng-click="SeleccionarPersona(persona)">
                                                <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                                            </label>
                                        </div>
                                    </td>

                                  </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                <!-------- mensaje de error ---->
                <div class="row">
                    <div class="col-xs-12">
                        <div ng-repeat="error in mensajeError | unique:error track by $index">
                            <span class="textoError">{{error}}</span>
                        </div>
                    </div>
                </div>
                <br>
                <!---- botones de operacion -->
                <div class="row">
                    <div class="col-xs-6">
                        <button class="btn botonOperacionModal btn-block" data-dismiss="modal" aria-label="Close" ng-click="CerrarPresupuestoModal()">CANCELAR</button>
                    </div>

                    <div class="col-xs-6">
                        <button focus class="btn botonOperacionModal btn-block" ng-click="TerminarPaso1(presupuesto1Forma.nombre.$invalid, presupuesto1Forma.apellido1.$invalid, presupuesto1Forma.nombreMedioCaptacion.$invalid)">SIGUIENTE &gt;&gt;</button>
                    </div>
                </div>
            <br>
            </form>
            <!-- Paso 2 -->
            <form name="presupuesto2Forma" ng-show="pasoPresupuesto == 2">
               
               
               <div ng-show="presupuesto.Persona.Proyecto.length > 0 && opt != 'AgregarProyecto'">
                    <div class="row">

                        <div class="col-xs-12">
                           <span class="textoInstruccion">¿El presupuesto es de un nuevo proyecto o de un proyecto ya registrado?</span>
                        </div>

                        <div class="col-xs-12" style="margin-top:10px">

                            <div class="btn-group">

                                <a class="btn radioOpt" ng-class="{Active: proyectoNuevo}" ng-click="ProyectoNuevoRegistrado('Nuevo')"> 
                                    Nuevo Proyecto
                                </a>

                                 <a class="btn radioOpt" ng-class="{Active: !proyectoNuevo}" ng-click="ProyectoNuevoRegistrado('Registrado')">
                                    Proyecto Registrado
                                </a>

                            </div>

                        </div>
                    </div>
                     <br><br>
                    <div class="row" ng-show="!proyectoNuevo">

                        <div class="col-sm-12 etiquetaDropdownList">
                             <label>Proyectos del cliente*</label>
                             <div class="dropdown">

                                <button class="dropdown-toggle  {{clasePresupuesto.paso2.tipoProyecto}} " data-toggle="dropdown">
                                    <span ng-if="presupuesto.Proyecto.Nombre.length > 0">{{presupuesto.Proyecto.TipoProyecto.Nombre}} - {{presupuesto.Proyecto.Nombre}}</span>
                                    <span class="caret"></span>
                                </button>

                                <ul class="dropdown-menu listaOpcionesDropdownList" >                                
                                    <li ng-repeat="proyecto in presupuesto.Persona.Proyecto | orderBy:'TipoProyecto.Nombre'" ng-if="proyecto.EstatusProyecto.EstatusProyectoId != '4'">
                                        <a  href="" class="dropdownOpcionModal" ng-click="CambiarProyectoPersona(proyecto)">
                                            <span>{{proyecto.TipoProyecto.Nombre}} - {{proyecto.Nombre}}</span>
                                        </a>
                                    </li>
                                </ul>

                            </div>
                        </div>
                    </div>
                    
                    <br>
                </div>
                
              
               
                <!-- Tipo de proyecto -->
                <div class="row">
                    <!-- tipo de proyecto -->
                    <div class="col-sm-6 etiquetaDropdownList">
                         <label>Proyecto*</label>
                         <div class="dropdown" style="margin-top:-5px">

                            <a class="btn dropdown-toggle dropdownlistModal {{clasePresupuesto.paso2.tipoProyecto}} " data-toggle="dropdown" ng-class="{disabled: !proyectoNuevo}" style="font-size: 16px; height: 34px;">
                                    <span>{{presupuesto.Proyecto.TipoProyecto.Nombre}}</span>
                                    <span class="caret"></span>
                            </a>
                            
                            <ul class="dropdown-menu listaOpcionesDropdownList" >                                
                                <li ng-repeat="tipo in tipoProyecto | orderBy:'Nombre'" ng-if="tipo.Activo">
                                    <a  href="" class="dropdownOpcionModal" ng-click="CambiarTipoProyecto(tipo)">
                                        <span>{{tipo.Nombre}}</span>
                                    </a>
                                </li>
                            </ul>

                        </div>
                    </div>
                        
                    <div class="hidden-sm hidden-md hidden-lg"> <br> </div>
                   <!-- nombre -->
                    <div class="col-sm-6">
                       <div class="entrada2">
                            <input type="text" autocomplete="off" required class="entrada form-control"  ng-disabled="!proyectoNuevo"  name="nombre" ng-model="presupuesto.Proyecto.Nombre" ng-maxlength="120" />
                            <label>Nombre del Proyecto*</label>
                        </div>
                   </div>             
                </div>
                <div class="hidden-sm hidden-md hidden-lg"> <br> </div>
                
                <!-- Domicilios -->
                <div class="row">
                    <div class="col-xs-12">
                        <a class="btn btn-block botonAcordion {{GetClaseDropdown(mostrarContenido.direccion)}} textoIzquierda" ng-click="MostrarContenido('direccion')"><!--  -->
                            <span class=" " >
                                <span ng-if="!mostrarContenido.direccion" style="width:20px" class="fa fa-chevron-right"></span>
                                <span ng-if="mostrarContenido.direccion" style="width:20px" class="fa fa-chevron-up"></span>
                                <span> Domicilios</span> 
                            </span>
                            
                        </a>
                    </div>
                </div>
                
                <div class="row" ng-if="mostrarContenido.direccion">
                    <div class="col-xs-12">
                       <div class="margenDropdownlistContenido">
                           <div class="row">
                               <div class="col-xs-12">
                                    <button class="btn botonAgregarAcordion pull-right" ng-click="AgregarDomicilio()" >
                                        <span>
                                            <span class="fa fa-plus"></span>
                                            <span>Nuevo</span> 
                                        </span>
                                    </button>
                               </div>
                            </div>

                            <!-- Domicilios -->
                            <div class="row" ng-if="presupuesto.Persona.Domicilio.length +  presupuesto.Persona.NuevoDomicilio.length > 0">
                                <div class="col-xs-12">
                                    <div class="table-responsive TablaModal">
                                        <table class="table table-hover table-striped table-condensed">
                                            <thead class="TituloTabla">
                                              <tr>
                                                <th>Tipo Domicilio</th>
                                                <th>Domicilio</th>
                                                <th class="text-center">Detalles</th>
                                                <th class="text-center">Editar</th>
                                                <th class="text-center">Quitar </th>
                                                <th class="text-center">Seleccionar </th>
                                              </tr>
                                            </thead>
                                            <tbody >
                                              <tr ng-repeat="domicilio in presupuesto.Persona.Domicilio | orderBy:['TipoMedioContacto.Nombre'] " ng-show="domicilio.Activo">
                                                <td>{{domicilio.TipoMedioContacto.Nombre}}</td>
                                                <td>{{domicilio.Domicilio}}</td>

                                               <td class="text-center">
                                                    <a  class="BotonOperacion" href=""  ng-click="DetalleDomicilio(domicilio)">
                                                        <span class="fa fa-eye fa-2x"></span>
                                                    </a>
                                                </td>

                                                <td class="text-center">
                                                    <a  class="BotonOperacion" href=""  ng-click="EditarDomicilioAgregado(domicilio, 'Registrado')">
                                                        <span class="fa fa-pencil fa-2x"></span>
                                                    </a>
                                                </td>

                                                <td class="text-center">
                                                </td>

                                                <td class="text-center">
                                                    <div class="checkboxOperativo">
                                                        <label>
                                                            <input  ng-model="domicilio.Seleccionado" type="checkbox" value="" ng-click="SeleccionarDomicilio(domicilio)">
                                                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                                                        </label>
                                                    </div>
                                                </td>
                                              </tr>

                                              <!-- domicilios agregados sin registro en la base de datos -->
                                              <tr ng-repeat="domicilio in presupuesto.Persona.NuevoDomicilio | orderBy:['TipoMedioContacto.Nombre'] ">

                                                <td>{{domicilio.TipoMedioContacto.Nombre}}</td>

                                                <td>{{domicilio.Domicilio}}</td>

                                                <td class="text-center">
                                                    <a  class="BotonOperacion" href=""  ng-click="DetalleDomicilio(domicilio)">
                                                        <span class="fa fa-eye fa-2x"></span>
                                                    </a>
                                                </td>

                                                <td class="text-center">
                                                    <a  class="BotonOperacion" href=""  ng-click="EditarDomicilioAgregado(domicilio, 'Nuevo')">
                                                        <span class="fa fa-pencil fa-2x"></span>
                                                    </a>
                                                </td>

                                                <td class="text-center">
                                                    <a  class="BotonOperacion" href=""  ng-click="BorrarDomicilioAgregado(domicilio)">
                                                        <span class="fa fa-times fa-2x"></span>
                                                    </a>
                                                </td>

                                                <td class="text-center">
                                                    <div class="checkboxOperativo">
                                                        <label>
                                                            <input  ng-model="domicilio.Seleccionado" type="checkbox" value="" ng-click="SeleccionarDomicilio(domicilio)">
                                                            <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                                                        </label>
                                                    </div>
                                                </td>


                                              </tr>    

                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div ng-show="presupuesto.Persona.UnidadNegocio.length > 1 && permisoOperativo.verTodosCliente">
                    <br>
                    <div class="row">
                        <div class="col-xs-12">
                            <span class="textoInstruccion">Selecciona la unidad de negocio responsable del proyecto</span>
                        </div>
                    </div>

                    <div class="row">

                       <div ng-repeat="unidad in presupuesto.Persona.UnidadNegocio">
                           <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:15px">

                               <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: unidad.MargenSel}">
                                   <input  type="checkbox" class="badgeboxPre" ng-model="unidad.MargenSel" ng-click="CambiarMargenPresupuesto(unidad.UnidadNegocioId, unidad.MargenSel)">
                                   <span class="badge">&check;</span>
                                   <span> {{unidad.NombreTipoUnidadNegocio}} - {{unidad.Nombre}}</span> 
                               </label>

                            </div>
                        </div>

                    </div>
                </div>
                
                <br><br>
                <!-------- mensaje de error ---->
                <div class="row">
                    <div class="col-xs-12">
                        <div ng-repeat="error in mensajeError">
                            <span class="textoError">{{error}}</span>
                        </div>
                    </div>
                </div>
                <br>
                <!---- botones de operacion -->
                <div class="row">
                   <div class="col-xs-6" ng-if="pasoMinimo == 2">
                        <button class="btn botonOperacionModal btn-block" data-dismiss="modal" aria-label="Close" ng-click="CerrarPresupuestoModal()">CANCELAR</button>
                    </div>
                    
                    <div class="col-xs-6" ng-if="pasoMinimo != 2">
                        <button class="btn botonOperacionModal btn-block" ng-click="AnteriorPresupuesto()">&lt;&lt; ANTERIOR</button>
                    </div>

                    <div class="col-xs-6">
                        <button focus class="btn botonOperacionModal btn-block" ng-click="TerminarPaso2(presupuesto2Forma.nombre.$invalid)">SIGUIENTE &gt;&gt;</button>
                    </div>
                </div>
            <br>
            </form>
            
            <!-- pasos -->
            <div ng-show="pasoPresupuesto > 2 && pasoPresupuesto < 9">
                
                <div class="stepwizard">
                  <div class="stepwizard-rowActivo"></div>
                   
                    <div class="stepwizard-row" ng-class="GetClaseLineaPaso()">
                        
                        <div class="stepwizard-step"  ng-repeat="paso in detallePaso">
                            <button type="button" class="btn  btn-circle" ng-class="GetClasePaso(paso.numero)" disabled>{{paso.numero}}</button>
                            <p>{{paso.nombre}}</p>
                        </div>
                    </div>
                </div>
                
                <br>
                <div class="row">
                    <div class="col-xs-12">
                        {{presupuesto.Proyecto.TipoProyecto.Nombre}} - {{presupuesto.Proyecto.Nombre}}: {{presupuesto.Persona.Nombre}} {{presupuesto.Persona.PrimerApellido}} {{presupuesto.Persona.SegundoApellido}}
                        <div class="divisorNaranja"></div>
                    </div>
                </div>
                
            </div>
            
             <!-- Paso 3 -->
            <form name="presupuesto3Forma" ng-show="pasoPresupuesto == 3">
               
                
                <div class="row">
                    <div class="col-xs-12 tituloPaso">
                        <span>Datos del Presupuesto</span>
                    </div>
                </div>
                <br>
                
                <!-- opciones del presupuesto -->
                <div class="row">
                    <!-- Cocina Integral -->
                    <div class="col-sm-6">
                        <div class="tituloOpcionPresupuesto" ng-class="{active: presupuesto.Proyecto.TipoProyecto.Mueble}">
                            <span ng-if="!presupuesto.Proyecto.TipoProyecto.Mueble" class="fa fa-circle-thin" style="font-size:26px"></span>
                            <span ng-if="presupuesto.Proyecto.TipoProyecto.Mueble" class="fa fa-check-circle-o" style="font-size:26px"></span>
                            <span class="textoTituloOpcionPresupuesto" style="font-size:20px;"> Cocina Integral</span>
                        </div>
                        <div class="panelItemPresupuesto" ng-class="{disabled: !presupuesto.Proyecto.TipoProyecto.Mueble}">
                           <div class="row">
                               <div class="col-xs-12 text-center">
                                   <span>¿Qué combinaciones quieres presupuestar?</span>
                               </div>
                           </div>
                            <br>
                            <div class="row">
                               <div class="col-xs-12">
                                                           
                                    <div ng-repeat="combinacion in combinacion | orderBy:'Nombre'" ng-show="combinacion.Activo">
                                        <div class="checkbox checkboxOperativo itemPresupuesto" style="margin-left: 0px" ng-class="{itemPresupuestoPrimero: $first}">
                                            <label style="width:100%">
                                                <input  ng-model="combinacion.PorDefecto" type="checkbox" ng-disabled=" !presupuesto.Proyecto.TipoProyecto.Mueble">
                                                <span class="cr"> <i class="cr-icon fa fa-check"></i> </span>
                                                <span>{{combinacion.Nombre}}</span>
                                            </label>
                                        </div>
                                    </div>
                                            
                               </div>
                           </div>
                           
                        </div>
                        
                        <div style="height: 10px"></div>
                    </div>
                    
                    
                    
                    <!-- Cubierta -->
                    <div class="col-sm-6">
                        <div class="tituloOpcionPresupuesto" ng-class="{active:(presupuesto.Proyecto.TipoProyecto.CubiertaAglomerado || presupuesto.Proyecto.TipoProyecto.CubiertaPiedra)}">
                            <span ng-if="!(presupuesto.Proyecto.TipoProyecto.CubiertaAglomerado || presupuesto.Proyecto.TipoProyecto.CubiertaPiedra)" class="fa fa-circle-thin" style="font-size:26px"></span>
                            <span ng-if="(presupuesto.Proyecto.TipoProyecto.CubiertaAglomerado || presupuesto.Proyecto.TipoProyecto.CubiertaPiedra)" class="fa fa-check-circle-o" style="font-size:26px"></span>
                            <span class="textoTituloOpcionPresupuesto" style="font-size:20px;"> Cubierta</span>
                        </div>
                        
                        <div class="panelItemPresupuesto" ng-class="{disabled: !(presupuesto.Proyecto.TipoProyecto.CubiertaAglomerado || presupuesto.Proyecto.TipoProyecto.CubiertaPiedra)}">
                           <div class="row">
                               <div class="col-xs-12 text-center">
                                   <span>¿Qué tipo de cubierta quieres presupuestar?</span>
                               </div>
                           </div>
                            <br>
                            <div class="row">
                               <div class="col-xs-12">
                                                           
                                    <div ng-repeat="tipo in tipoCubierta | orderBy:'Nombre'">
                                        <div class="checkbox checkboxOperativo itemPresupuesto" style="margin-left: 0px" ng-class="{itemPresupuestoPrimero: $first}" >
                                            <label style="width:100%">
                                                <input  ng-model="tipo.PorDefecto" type="checkbox" ng-disabled="(tipo.TipoCubiertaId=='1' && !presupuesto.Proyecto.TipoProyecto.CubiertaAglomerado) || (tipo.TipoCubiertaId=='2' && !presupuesto.Proyecto.TipoProyecto.CubiertaPiedra)">
                                                <span class="cr"> <i class="cr-icon fa fa-check"></i> </span>
                                                <span>{{tipo.Nombre}}</span>
                                            </label>
                                        </div>
                                    </div>
                                            
                               </div>
                           </div>
                           
                        </div>
                           
                    </div>
                </div>
                
                <div ng-show="presupuesto.Persona.UnidadNegocio.length > 1 && permisoOperativo.verTodosCliente  && (operacion == 'Editar' || opt == 'AgregarPresupuesto')">
                    <br>
                    <div class="row">
                        <div class="col-xs-12">
                            <span class="textoInstruccion">Selecciona la unidad de negocio responsable del proyecto</span>
                        </div>
                    </div>

                    <div class="row">

                       <div ng-repeat="unidad in presupuesto.Persona.UnidadNegocio">
                           <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:15px">

                               <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: unidad.MargenSel}">
                                   <input  type="checkbox" class="badgeboxPre" ng-model="unidad.MargenSel" ng-click="CambiarMargenPresupuesto(unidad.UnidadNegocioId, unidad.MargenSel)">
                                   <span class="badge">&check;</span>
                                   <span> {{unidad.NombreTipoUnidadNegocio}} - {{unidad.Nombre}}</span> 
                               </label>

                            </div>
                        </div>

                    </div>
                </div>
                
                <br>
                
                <!-------- mensaje de error ---->
                <div class="row">
                    <div class="col-xs-12">
                        <div ng-repeat="error in mensajeError">
                            <span class="textoError">{{error}}</span>
                        </div>
                    </div>
                </div>
                <br>
                <!---- botones de operacion -->
                <div class="row">
                   
                   <div class="col-xs-6" ng-if="pasoMinimo == 3">
                        <button class="btn botonOperacionModal btn-block" data-dismiss="modal" aria-label="Close" ng-click="CerrarPresupuestoModal()">CANCELAR</button>
                    </div>
                    
                    <div class="col-xs-6" ng-if="pasoMinimo != 3">
                        <button class="btn botonOperacionModal btn-block" ng-click="AnteriorPresupuesto()">&lt;&lt; ANTERIOR</button>
                    </div>

                    <div class="col-xs-6">
                        <button focus class="btn botonOperacionModal btn-block" ng-click="TerminarPaso3()">SIGUIENTE &gt;&gt;</button>
                    </div>
                </div>
            <br>
            </form>
            
            <!-- Paso 4 -->
            <form name="presupuesto4Forma" ng-show="pasoPresupuesto == 4">
                
                <div class="row">
                    <div class="col-xs-12 tituloPaso">
                        <span>Módulos</span>
                    </div>
                </div>
                <br><br>
                
                <div class="row">
                   
                   <!-- imagen -->
                    <div class="col-sm-6 hidden-md hidden-sm hidden-lg">
                          
                       <div class="" ng-if="moduloAgregar.Imagen.length > 0">
                            <div>
                                <img class="imagenModuloPresupuesto center-block" ng-src="data:image/PNG;base64,{{moduloAgregar.Imagen}}"/>
                            </div>
                        </div>

                        <!-- Imagen -->
                       <div class="marcoImagenPresupuesto" ng-if="moduloAgregar.Imagen.length == 0">
                            <div class="imagenModuloVaciaPresupuesto">Módulo</div>
                        </div>
                    </div>
                    <div class="hidden-md hidden-sm hidden-lg"><br><br></div>
                    
                    <!-- Módulo -->
                    <div class="col-sm-6">
                        
                        <!-- Tipo de módulo-->
                        <div class="row">
                            <div class="col-xs-12 etiquetaDropdownList">
                                <label>Tipo de Módulo</label>
                                 <div class="dropdown">

                                    <button class="dropdown-toggle  dropdownlistModal" data-toggle="dropdown">
                                        <span>{{moduloAgregar.TipoModulo.Nombre}}</span>
                                        <span class="caret"></span>
                                    </button>

                                    <ul class="dropdown-menu listaOpcionesDropdownList" >                                
                                        <li ng-repeat="tipo in tipoModulo | orderBy:'Nombre'" ng-show="tipo.Activo">
                                            <a  href="" class="dropdownOpcionModal" ng-click="CambiarTipoModulo(tipo)">
                                                <span>{{tipo.Nombre}}</span>
                                            </a>
                                        </li>
                                    </ul>

                                </div>
                            </div>
                        </div>
                        <br><br class="hidden-xs">
                        <!-- Módulo -->
                        <div class="row">
                            <div class="col-xs-12 etiquetaDropdownList">
                                <label>Módulo</label>
                                 <div class="dropdown">

                                    <button class="dropdown-toggle  dropdownlistModal" data-toggle="dropdown" ng-disabled="moduloAgregar.TipoModulo.TipoModuloId.length == 0">
                                        <span>{{moduloAgregar.Nombre}}</span>
                                        <span class="caret"></span>
                                    </button>

                                    <ul class="dropdown-menu listaOpcionesDropdownList" >                                
                                        <li ng-repeat="modulo in modulo | orderBy:'Nombre' | filter:{TipoModuloId:moduloAgregar.TipoModulo.TipoModuloId}:true">
                                            <a  href="" class="dropdownOpcionModal" ng-click="CambiarModulo(modulo)">
                                                <span>{{modulo.Nombre}}</span>
                                            </a>
                                        </li>
                                    </ul>

                                </div>
                            </div>
                        </div>
                         
                    </div>
                    
                    <!-- imagen -->
                    <div class="col-sm-6 hidden-xs">
                          
                       <div class="" ng-if="moduloAgregar.Imagen.length > 0">
                            <div>
                                <img class="imagenModuloPresupuesto center-block" ng-src="data:image/PNG;base64,{{moduloAgregar.Imagen}}"/>
                            </div>
                        </div>

                        <!-- Imagen -->
                       <div class="marcoImagenPresupuesto" ng-if="moduloAgregar.Imagen.length == 0">
                            <div class="imagenModuloVaciaPresupuesto">Módulo</div>
                        </div>
                    </div>
                    
                </div>
                <br><br>
                
                <div class="row">
                   
                   <!-- ancho -->
                    <div class="col-xs-6 col-sm-3 etiquetaDropdownList">
                        <label>Ancho</label>
                         <div class="dropdown">

                            <button class="dropdown-toggle  dropdownlistModal" data-toggle="dropdown" ng-disabled="moduloAgregar.ModuloId.length == 0">
                                <span>{{moduloAgregar.Ancho}}</span>
                                <span class="caret"></span>
                            </button>
                            
                            <ul class="dropdown-menu listaOpcionesDropdownList" >                                
                                <li ng-repeat="ancho in moduloAgregar.Medida | orderBy:'AnchoNumero' | filter:{show:true} | unique: 'Ancho'">
                                    <a  href="" class="dropdownOpcionModal" ng-click="CambiarAncho(ancho.Ancho)">
                                        <span>{{ancho.Ancho}}</span>
                                    </a>
                                </li>
                            </ul>

                        </div>
                    </div>
                    
                    <!-- alto -->
                    <div class="col-xs-6 col-sm-3 etiquetaDropdownList">
                        <label>Alto</label>
                         <div class="dropdown">

                            <button class="dropdown-toggle  dropdownlistModal" data-toggle="dropdown" ng-disabled="moduloAgregar.Ancho.length == 0">
                                <span>{{moduloAgregar.Alto}}</span>
                                <span class="caret"></span>
                            </button>

                            <ul class="dropdown-menu listaOpcionesDropdownList" >                                
                                <li ng-repeat="alto in moduloAgregar.Medida | orderBy:'AltoNumero' | filter:{Ancho:moduloAgregar.Ancho, show:true}:true | unique: 'Alto'">
                                    <a  href="" class="dropdownOpcionModal" ng-click="CambiarAlto(alto.Alto)">
                                        <span>{{alto.Alto}}</span>
                                    </a>
                                </li>
                            </ul>

                        </div>
                    </div>
                
                    <div class="row hidden-sm hidden-md hidden-lg">
                       <div class="col-xs-12 "><br></div>
                    </div>
                    
                    <!-- Profundo -->
                    <div class="col-xs-6 col-sm-3 etiquetaDropdownList">
                        <label>Profundo</label>
                         <div class="dropdown">

                            <button class="dropdown-toggle  dropdownlistModal" data-toggle="dropdown" ng-disabled="moduloAgregar.Alto.length == 0">
                                <span>{{moduloAgregar.Profundo}}</span>
                                <span class="caret"></span>
                            </button>

                            <ul class="dropdown-menu listaOpcionesDropdownList" >                                
                                <li ng-repeat="profundo in moduloAgregar.Medida | orderBy:'ProfundoNumero' | filter:{Ancho:moduloAgregar.Ancho, Alto:moduloAgregar.Alto, show:true}:true">
                                    <a  href="" class="dropdownOpcionModal" ng-click="CambiarProfundo(profundo.Profundo)">
                                        <span>{{profundo.Profundo}}</span>
                                    </a>
                                </li>
                            </ul>

                        </div>
                    </div>
                    
                    <!-- Agregar Módulo -->
                    <div class="col-xs-6 col-sm-3">
                        <button class="btn botonAgregarAcordion center-block" ng-disabled="!(moduloAgregar.Profundo.length > 0)" ng-click="AgregarModulo(1)"> <span class="fa fa-plus"></span> </button>
                    </div>
                </div>
                
                <!-- Contador de tipo de módulo -->
                <div class="row">
                    <div class="col-xs-6 col-sm-4 col-md-3" ng-repeat="tipo in tipoModuloAgregar | orderBy:'Nombre'" style="margin-bottom:10px">
                        <span class="textoNumeroTipoModulo">{{tipo.Cantidad}}</span>
                        <spna class="textoTipoModulo"> {{tipo.Nombre}}(s)</spna> 
                    </div>
                </div>
                
                <div class="table-responsive tablePerfilClienteDatos" ng-show="presupuesto.Modulo.length > 0">
                    <table class="table table-hover table-striped table-condensed">
                        <thead class="TituloTabla">
                          <tr>
                            <th><span class=""><b>Módulo</b></span></th>
                            <th class="text-center"><span><b>Ancho</b></span></th>
                            <th class="text-center"><span><b>Alto</b></span></th>
                            <th class="text-center"><span><b>Profundo</b></span></th>
                            <th class="text-center"><span><b>Cantidad</b></span></th>
                            <th class="text-center"><span><b>Quitar</b></span></th>
                            
                          </tr>
                        </thead>
                        <tbody >
                          <tr ng-repeat="modulo in presupuesto.Modulo | orderBy:['TipoModulo.Nombre', 'Nombre']">

                             <td>{{modulo.TipoModulo.Nombre}} {{modulo.Nombre}}</td>
                             <td class="text-center">{{modulo.Ancho}}</td>
                             <td class="text-center">{{modulo.Alto}}</td>
                             <td class="text-center">{{modulo.Profundo}}</td>
                             
                             
                             <td class="text-center">
                                 <span>{{modulo.Cantidad}}</span>
                                 <div class="btn-group" role="group" aria-label="...">
                                  <a type="button" class="btn botonSumarRestarCantidadModulo" ng-click="ReducirCantidad(modulo)"><span class="fa fa-minus"></span></a>
                                  <a type="button" class="btn botonSumarRestarCantidadModulo" ng-click="AgregarCantidad(modulo)"><span class="fa fa-plus"></span></a>
                                </div>
                             </td>

                            <td class="text-center">
                                <a  class="BotonOperacion" href=""  ng-click="QuitarModulo(modulo)" >
                                    <span class="fa fa-times fa-2x"></span>
                                </a>
                            </td>

                          </tr>
                        </tbody>
                    </table>
                </div>
                
                <!-------- mensaje de error ---->
                <div class="row">
                    <div class="col-xs-12">
                        <div ng-repeat="error in mensajeError">
                            <span class="textoError">{{error}}</span>
                        </div>
                    </div>
                </div>
                <br>
                <!---- botones de operacion -->
                <div class="row">
                    <div class="col-xs-6">
                        <button class="btn botonOperacionModal btn-block" ng-click="AnteriorPresupuesto()">&lt;&lt; ANTERIOR</button>
                    </div>

                    <div class="col-xs-6">
                        <button ng-disabled="presupuesto.Modulo.length == 0" focus class="btn botonOperacionModal btn-block" ng-click="TerminarPaso4()">SIGUIENTE &gt;&gt;</button>
                    </div>
                </div>
            <br>
            </form>
            
            <!-- Paso 5 -->
            <form name="presupuesto5Forma" ng-show="pasoPresupuesto == 5">
                
                <div class="row">
                    <div class="col-xs-12 tituloPaso">
                        <span>Servicios y Puertas</span>
                    </div>
                </div>
                <br><br>
                
                <!-- SERVICIOS -->
                <div class="row">
                    <div class="col-xs-12">
                        <a class="btn btn-block botonAcordionPerfil" ng-class="GetClaseTab('Servicio')" ng-click="CambiarTab('Servicio')">
                            Servicios
                            <span class="fa fa-chevron-down pull-right" style="width:20px;" ng-if="tabSeleccionada != 'Servicio'"></span>
                            <span class="fa fa-chevron-up pull-right" style="width:20px;" ng-if="tabSeleccionada == 'Servicio'"></span>
                        </a>
                    </div>
                </div>
                
                <div class="row" ng-show="tabSeleccionada == 'Servicio'">
                   <div class="col-xs-12">
                       <div class="contenedorAcordio">
                           
                           <span class="textoInstruccion"> Cantidad Sugerida: {{presupuesto.Superficie}}</span>
                           <br><br>
                           
                            <div class="table-responsive tablePerfilClienteDatos">
                                <table class="table table-hover table-striped table-condensed">
                                    <thead class="TituloTabla">
                                      <tr>
                                        <th><span><b>Presupuestar</b></span></th>
                                        <th><span class=""><b>Servicio</b></span></th>
                                        <th class="text-center"><span><b>Cantidad</b></span></th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      <tr ng-repeat="servicio in servicio | orderBy:'Nombre'" ng-show="servicio.Activo">

                                            <td>
                                                <div class="checkboxOperativo" style="margin-left:0px !important">
                                                    <label>
                                                        <input  ng-model="servicio.Obligatorio" type="checkbox" value="" ng-click="ServicioFocus(servicio)">
                                                        <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                                                    </label>
                                                </div>
                                            </td>

                                            <td>{{servicio.Nombre}}</td>

                                            <td style="max-width:100px" class="text-center">
                                                <input ng-disabled="!servicio.Obligatorio"  ng-class="{textoOculto: !servicio.Obligatorio}" style="max-width:90px" required ng-pattern="erNumeroDecimal" type="text" ng-model="servicio.Cantidad" class="text-right entrada" id="servicio{{servicio.ServicioId}}"/>
                                            </td>

                                      </tr>
                                    </tbody>
                                </table>
                            </div>
                           
                        </div>
                    </div>
                </div>
                
                <!-- Puertas -->
                <div class="row">
                    <div class="col-xs-12">
                       <div class="input-group" style="width: 100%; max-height: 33px !important">
                                                             
                            <span class="input-group-btn" style="cursor: default">
                               <span class="btn entradaBtn">
                                    # Puertas: {{presupuesto.NumeroPuerta}}
                                </span>
                                
                                <span class="btn entradaBtn">
                                    # Cajones: {{presupuesto.NumeroCajon}}
                                </span>
                            </span>
                            
                            <a class="btn btn-block botonAcordionPerfil" ng-class="GetClaseTab('Puertas')" ng-click="CambiarTab('Puertas')">
                                Puertas
                                <span class="fa fa-chevron-down pull-right" style="width:20px;" ng-if="tabSeleccionada != 'Puertas'"></span>
                                <span class="fa fa-chevron-up pull-right" style="width:20px;" ng-if="tabSeleccionada == 'Puertas'"></span>
                            </a>
                        </div>
                    </div>
                </div>
                
                <div class="row" ng-show="tabSeleccionada == 'Puertas'">
                   <div class="col-xs-12">
                      
                       <div class="contenedorAcordio">
                           <br>
                           
                           <!--<div class="row">
                              <div class="col-xs-6">
                                  <div class="entrada2">
                                      <input required ng-pattern="erNumeroEnteroSinCero" type="text" class="entrada form-control" disabled ng-model="presupuesto.NumeroPuerta">
                                      <label># Puertas</label>
                                  </div>
                              </div>

                              <div class="col-xs-6">
                                  <div class="entrada2">
                                      <input required ng-pattern="erNumeroEnteroSinCero" type="text" class="entrada form-control" disabled ng-model="presupuesto.NumeroCajon">
                                      <label># Cajones</label>
                                  </div>
                              </div>
                         </div>
                          <br>-->
                           
                            <div class="row">
                                <div ng-repeat="muestrario in muestrario | orderBy:'Nombre'" ng-show="muestrario.Activo && muestrario.Puerta.length > 0">
                                    <div class="col-xs-6 col-sm-4 col-md-4 col-lg-4" style="margin-bottom:10px">
                            
                                        <!--<div class="input-group">-->

                                           <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: muestrario.PorDefecto}">
                                               <input  type="checkbox" class="badgeboxPre" ng-model="muestrario.PorDefecto" ng-change="ChambiarClasePuerta(muestrario.Nombre, muestrario.PorDefecto);">
                                               <span class="badge">&check;</span>
                                               <span> {{muestrario.Nombre}}</span> 
                                           </label>

                                          <!--<span class="input-group-btn">
                                            <button class="btn btn-default dropdownPuertaNegro" ng-class="{dropdownPuertaNaranja: muestrario.PorDefecto}"><span class="fa fa-caret-down"></span></button>
                                          </span>-->
                                        <!--</div>-->
                                        
                                        <div class="panelItemPresupuesto itemPuerta">
                                       
                                            <div ng-repeat="puerta in muestrario.Puerta | orderBy:'Nombre'" ng-show="puerta.Activo">
                                                <div class="checkbox checkboxOperativo itemPresupuesto" style="margin-left: 0px" ng-class="{itemPresupuestoPrimero: $first}">
                                                    <label style="width:100%">
                                                        <span>{{puerta.Nombre}}</span>
                                                    </label>
                                                </div>
                                            </div>

                                        </div>
                                    
                                    </div>
                                    
                                </div>
                                
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                <!-------- mensaje de error ---->
                <div class="row">
                    <div class="col-xs-12">
                        <div ng-repeat="error in mensajeError | unique track by $index">
                            <span class="textoError">{{error}}</span>
                        </div>
                    </div>
                </div>
                <br>
                <!---- botones de operacion -->
                <div class="row">
                    <div class="col-xs-6">
                        <a class="btn botonOperacionModal btn-block" ng-click="AnteriorPresupuesto()">&lt;&lt; ANTERIOR</a>
                    </div>

                    <div class="col-xs-6">
                        <a focus class="btn botonOperacionModal btn-block" ng-click="TerminarPaso5()">SIGUIENTE &gt;&gt;</a>
                    </div>
                </div>
            <br>
            </form>
            
            <!-- Paso 6 -->
            <form name="presupuesto6Forma" ng-if="pasoPresupuesto == 6">
                <div class="row">
                    <div class="col-xs-12 tituloPaso">
                        <span>Maqueo y Accesorios</span>
                    </div>
                </div>
                <br><br>
                
                <!-- Maqueo -->
                <div class="row">
                    <div class="col-xs-12">
                       <span class="textoInstruccion"> Cantidad Sugerida: {{presupuesto.Superficie}}</span>
                       
                        <div class="input-group" style="width: 100%; max-height: 33px !important">
                                                             
                            <span class="input-group-btn" >
                               <span class="btn entradaBtn">
                                    <input type="text" placeholder="Cantidad" ng-model="presupuesto.CantidadMaqueo" class="entradaInput" min="0" disabled/>
                                </span>
                            </span>
                                
                            <a class="btn btn-block botonAcordionPerfil" ng-class="GetClaseTab('Maqueo')" ng-click="CambiarTab('Maqueo')">
                                Maqueo
                                <span class="fa fa-chevron-down pull-right" style="width:20px;" ng-if="tabSeleccionada != 'Maqueo'"></span>
                                <span class="fa fa-chevron-up pull-right" style="width:20px;" ng-if="tabSeleccionada == 'Maqueo'"></span>
                            </a>
                            
                        </div>
                    </div>
                </div>
                
                <div class="row" ng-show="tabSeleccionada == 'Maqueo'">
                   <div class="col-xs-12">
                       <div class="contenedorAcordio">
                           
                           
                           <br>
                           
                           <!--<div class="row">
                                  <div class="col-xs-6">
                                      <div class="entrada2">
                                          <input required ng-pattern="erNumeroDecimal" type="text" class="entrada form-control" ng-model="presupuesto.CantidadMaqueo">
                                          <label>Cantidad Maqueo</label>
                                      </div>
                                  </div>
                            </div>
                            <br>-->
                           
                            <div class="row">
                                <div ng-repeat="(key, maqueo) in maqueo | orderBy:'Nombre'" ng-show="maqueo.Activo && maqueo.Color.length > 0">
                                    <div class="col-xs-6 col-sm-4 col-md-3 col-lg-3" style="margin-bottom:10px">
                            
                                        <!--<div class="input-group">-->

                                           <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: maqueo.PorDefecto}">
                                               <input  type="checkbox" class="badgeboxPre" ng-model="maqueo.PorDefecto">
                                               <span class="badge">&check;</span>
                                               <span> {{maqueo.Nombre}}</span> 
                                           </label>

                                          <!--<span class="input-group-btn">
                                            <button class="btn btn-default dropdownPuertaNegro" ng-class="{dropdownPuertaNaranja: muestrario.PorDefecto}"><span class="fa fa-caret-down"></span></button>
                                          </span>-->
                                        <!--</div>-->
                                        
                                        <div class="panelItemPresupuesto">
                                       
                                            <div>
                                               
                                               <section  class="">
                                                   
                                                    <div class="carousel slide" data-ride="carousel" id="{{maqueo.MaqueoId}}">

                                                        <div class="carousel-inner itemMaqueo" >

                                                            <div data-target="#{{maqueo.MaqueoId}}" ng-repeat="color in maqueo.Color | orderBy:'Nombre'"  class= "text-center item" ng-class="{active: $first}" ng-show="color.Activo">
                                                                <div class="crop-carousel">
                                                                    <img ng-if="color.Imagen.length > 0" class="img-responsive center-block imagenPresupuesto" ng-src="data:image/PNG;base64,{{color.Imagen}}" ng-click="AbrirModalVerImagenes(maqueo.Color, $index, maqueo.Nombre)"/>
                                                                    <div ng-if="color.Imagen.length == 0" class="img-responsive center-block iconoImagenPresupuesto" ng-click="AbrirModalVerImagenes(maqueo.Color, $index, maqueo.Nombre)"><span class="fa fa-image"></span></div>
                                                                </div>
                                                                <span>{{color.Nombre}}</span>
                                                            </div>
                                                        </div>

                                                        <a class="left carousel-control"   data-target="#{{maqueo.MaqueoId}}" data-slide="prev" ng-show="maqueo.Color.length > 1">
                                                            <span class="glyphicon glyphicon-chevron-left"></span>
                                                        </a>

                                                        <a class="right carousel-control" data-target="#{{maqueo.MaqueoId}}" data-slide="next" ng-show="maqueo.Color.length > 1">
                                                            <span class="glyphicon glyphicon-chevron-right"></span>
                                                        </a>
                                                    </div>

                                                </section>
                                                <!--<div class=" itemPresupuesto" style="margin-left: 0px" ng-class="{itemPresupuestoPrimero: $first}">
                                                    <label style="width:100%">
                                                       <img class="img-responsive center-block" ng-src="data:image/PNG;base64,{{color.Imagen}}"/>
                                                        <span>{{color.Nombre}}</span>
                                                    </label>
                                                </div>-->
                                            </div>

                                        </div>
                                    
                                    </div>
                                    
                                </div>
                                
                            </div>
                           
                        </div>
                    </div>
                </div>
                <br>
                <!-- Accesorios -->
                <div class="row"><div class="col-xs-12 "> <div class="sepradorGris"> </div> </div></div><br>
                <div class="row"><div class="col-xs-12 "> <div class="tituloAccesorioPre"> Accesorios </div> </div></div><br>
                
                <span class="textoInstruccion"> Cantidad Sugerida: {{presupuesto.NumeroJaladera}} Jaladeras, {{presupuesto.NumeroRiel}} Rieles, {{presupuesto.NumeroVisagra}} Bisagras.</span>
                <br>
                
                <div class="row">
                    <div class="col-xs-12">
                       <div ng-repeat="tipo in tipoAccesorio | orderBy:'Nombre'" ng-show="tipo.Muestrario.length > 0">
                           
                           <div class="input-group" style="max-height: 33px !important">
                             
                                <span class="input-group-btn">
                                    <a class="btn checkBtn"  ng-class="{Presupuesto:tipo.Presupuesto}" style="width: auto" ng-click="PresupuestoTipoAccesorio(tipo);">
                                        <span class="fa fa-circle" ng-show="!tipo.Presupuesto"></span>
                                        <span class="fa fa-check-circle-o" ng-show="tipo.Presupuesto"></span>
                                    </a>
                                </span>
                                 
                                <span class="input-group-btn" >
                                   <span class="btn entradaBtn" ng-class="{bordeNegro2:tipo.Presupuesto, disabled:!tipo.Presupuesto}">
                                        <input type="number" placeholder="Cantidad" ng-model="tipo.Cantidad" class="entradaInput" min="0" ng-disabled="!tipo.Presupuesto" id="Tipo{{tipo.TipoAccesorioId}}"/>
                                    </span>
                                </span>
                                
                                <span class="form-control botonAcordionPerfil {{GetClaseTab(tipo.Nombre)}}"  style="height: auto !important; overflow:hidden !important;" ng-class="{bordeNegro2:tipo.Presupuesto, disabled:!tipo.Presupuesto}" ng-click="CambiarTab(tipo.Nombre)">
                                    {{tipo.Nombre}}
                                    <span ng-if="tipo.Obligatorio" class="fa fa-asterisk"></span>
                                    
                                    <span class="fa fa-chevron-down pull-right" ng-if="tabSeleccionada != tipo.Nombre"></span>
                                    <span class="fa fa-chevron-up pull-right" ng-if="tabSeleccionada == tipo.Nombre"></span>
                                </span>
                                
                            
                            </div>
                            
                            <div class="row" ng-show="tabSeleccionada == tipo.Nombre">
                               <div class="col-xs-12">

                                   <div class="contenedorAcordio">
                                       <!--<br>-->

                                       <div class="row">
                                          <!--<div class="col-xs-6">
                                              <div class="entrada2">
                                                  <input required ng-pattern="erNumeroEnteroSinCero" type="text" class="entrada form-control" ng-model="tipo.Cantidad">
                                                  <label>Cantidad</label>
                                              </div>
                                          </div>-->
                                          
                                          <div class="col-xs-12">
                                              <div class="entrada2">
                                                  <a class="btn botonAgregarAcordion pull-right" href="" ng-click="DescargarInstrucciones(tipo)">
                                                      <span class="fa fa-info-circle"></span>
                                                  </a>
                                              </div>
                                          </div>
                                     </div>
                                      <!--<br>-->

                                        <div class="row">
                                            <div ng-repeat="muestrario in tipo.Muestrario | orderBy:'Nombre'" ng-show=" muestrario.Accesorio.length > 0 && muestrario.Activo">
                                                <div class="col-xs-6 col-sm-4 col-md-3 col-lg-3" style="margin-bottom:10px">

                                                    <!--<div class="input-group">-->

                                                       <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: muestrario.PorDefecto}">
                                                           <input  type="checkbox" class="badgeboxPre" ng-model="muestrario.PorDefecto" ng-change="ChambiarClasePuerta(muestrario.Nombre, muestrario.PorDefecto);">
                                                           <span class="badge">&check;</span>
                                                           <span> {{muestrario.Nombre}}</span> 
                                                       </label>

                                                      <!--<span class="input-group-btn">
                                                        <button class="btn btn-default dropdownPuertaNegro" ng-class="{dropdownPuertaNaranja: muestrario.PorDefecto}"><span class="fa fa-caret-down"></span></button>
                                                      </span>-->
                                                    <!--</div>-->

                                                    <div class="panelItemPresupuesto">
                                       
                                                        <div>

                                                           <section  class="">

                                                                <div class="carousel slide" data-ride="carousel" id="{{muestrario.MuestrarioId}}">

                                                                    <div class="carousel-inner itemMaqueo" >

                                                                        <div data-target="#{{muestrario.MuestrarioId}}" ng-repeat="accesorio in muestrario.Accesorio | orderBy:'Nombre'"  class= "text-center item" ng-class="{active: $first}" >
                                                                            <div class="crop-carousel">
                                                                                <img ng-if="accesorio.Imagen.length > 0" class="img-responsive center-block imagenPresupuesto" ng-src="data:image/PNG;base64,{{accesorio.Imagen}}" ng-click="AbrirModalVerImagenes(muestrario.Accesorio, $index, tipo.Nombre + ' - ' + muestrario.Nombre)"/>
                                                                                <div ng-if="accesorio.Imagen.length == 0" class="img-responsive center-block iconoImagenPresupuesto" ng-click="AbrirModalVerImagenes(muestrario.Accesorio, $index, tipo.Nombre + ' - ' + muestrario.Nombre)"><span class="fa fa-image"></span></div>
                                                                            </div>
                                                                            <span>{{accesorio.Nombre}}</span>
                                                                        </div>
                                                                    </div>

                                                                    <a class="left carousel-control"  data-target="#{{muestrario.MuestrarioId}}" data-slide="prev" ng-show="muestrario.Accesorio.length > 1">
                                                                        <span class="glyphicon glyphicon-chevron-left"></span>
                                                                    </a>

                                                                    <a class="right carousel-control" data-target="#{{muestrario.MuestrarioId}}" data-slide="next" ng-show="muestrario.Accesorio.length > 1">
                                                                        <span class="glyphicon glyphicon-chevron-right"></span>
                                                                    </a>
                                                                </div>

                                                            </section>
                                                            <!--<div class=" itemPresupuesto" style="margin-left: 0px" ng-class="{itemPresupuestoPrimero: $first}">
                                                                <label style="width:100%">
                                                                   <img class="img-responsive center-block" ng-src="data:image/PNG;base64,{{color.Imagen}}"/>
                                                                    <span>{{color.Nombre}}</span>
                                                                </label>
                                                            </div>-->
                                                        </div>

                                                    </div>
                                                        

                                                </div>

                                            </div>

                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-------- mensaje de error ---->
                <div class="row">
                    <div class="col-xs-12">
                        <div ng-repeat="error in mensajeError">
                            <span class="textoError">{{error}}</span>
                        </div>
                    </div>
                </div>
                <br>
                <!---- botones de operacion -->
                <div class="row">
                    <div class="col-xs-6">
                        <a class="btn botonOperacionModal btn-block" ng-click="AnteriorPresupuesto()">&lt;&lt; ANTERIOR</a>
                    </div>

                    <div class="col-xs-6">
                        <a focus class="btn botonOperacionModal btn-block" ng-click="TerminarPaso6()">SIGUIENTE &gt;&gt;</a>
                    </div>
                </div>
            <br>
            </form>
            
            <!-- Paso 7 -->
            <form name="presupuesto7Forma" ng-if="pasoPresupuesto == 7">
                
                <div class="row">
                    <div class="col-xs-12 tituloPaso">
                        <span>Cubierta de Aglomerado</span>
                    </div>
                </div>
                <br><br>
                
                <!-- ubicaciones -->
                <div class="row">
                   <div class="col-xs-12 ">
                       <span class="textoInstruccion">Selecciona las ubicaciones a presupuestar.</span>
                   </div>
               </div>
                <br>
                <div class="row">
                  
                   <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:15px" ng-repeat="ubicacion in ubicacion | orderBy:'UbicacionCubiertaId'" ng-show="ubicacion.Activo">
                          
                       <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: ubicacion.SeleccionadoAglomerado}">
                           <input  type="checkbox" class="badgeboxPre" ng-model="ubicacion.SeleccionadoAglomerado">
                           <span class="badge">&check;</span>
                           <span> {{ubicacion.Nombre}}</span> 
                       </label>
                           
                    </div>
                    
                </div>
                <br>
                
                <!--  cantidad -->
                <div class="row">
                   <div class="col-xs-12 ">
                       <span class="textoInstruccion">Indica la cantidad a presupuestar de cada cubieta.</span>
                   </div>
               </div>
                <br>
                
                <div class="row">
                    <div class="col-xs-12">
                       <div ng-repeat="ubicacion in ubicacion | orderBy:'UbicacionCubiertaId'" >
                           
                           <div class="input-group">
                               <span class="input-group-addon etiquetaUbicacion" ng-class="{disabled: !ubicacion.SeleccionadoAglomerado}"><b>{{ubicacion.Nombre}}</b></span>
                               <input ng-disabled="!ubicacion.SeleccionadoAglomerado" required ng-pattern="erNumeroEnteroSinCero" type="text" class="form-control cantidadUbicacion" placeholder="Cantidad" ng-model="ubicacion.CantidadAglomerado">
                            </div>
                            <br>
                        
                        </div>
                    </div>
                </div>
                
                <!-- Materiales de cubierta de piedra -->
                <div class="row">
                   <div class="col-xs-12"  ng-show="MotrarMaterialesCubiertaAglomerado()">
                       <span class="textoInstruccion">Selecciona los materiales a presupuestar.</span>
                   </div>
               </div>
                <br>
                <div class="row">
                   <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:15px" ng-repeat="cubierta in cubierta | orderBy:'Material.Nombre'" ng-show="cubierta.Material.Activo && MostrarMaterial(cubierta.Grupo) && MostarPorUbicacion(cubierta.Ubicacion)" ng-if="cubierta.TipoCubierta.TipoCubiertaId == '1'">
                        <div class="tituloOpcionPresupuesto">
                            <span class="textoTituloOpcionPresupuesto" style="font-size:20px;"> {{cubierta.Material.Nombre}}</span>
                        </div>
                        
                        <div class="panelItemPresupuesto itemPuerta">
                        
                            <!--<div class="row" style="margin-bottom: 10px">
                               <div class="col-xs-12">
                                   <span ng-repeat="disponible in cubierta.Ubicacion" class="textoInstruccion">
                                       <span ng-if="!$last">{{disponible.Nombre}},</span>
                                       <span ng-if="$last">{{disponible.Nombre}}</span>
                                   </span>
                               </div>
                            </div>-->
                        
                            <div class="row">
                               <div class="col-xs-12">
                                                           
                                    <div ng-repeat="grupo in cubierta.Grupo | orderBy:'Grupo.Nombre'" ng-show="grupo.Grupo.Activo && grupo.Color.length > 0">
                                        <div class=" itemPresupuesto" style="margin-left: 0px" ng-class="{itemPresupuestoPrimero: $first}">
                                          
                                            <span class="checkbox checkboxOperativo">
                                                <label style="min-width:100%;">
                                                    <input  ng-model="grupo.PorDefecto" type="checkbox" >
                                                    <span class="cr"> <i class="cr-icon fa fa-check"></i> </span>
                                                    <span>{{grupo.Grupo.Nombre}}</span>
                                                    
                                                    <a class="btn botonIconoFa pull-right" href="" ng-click="AbrirModalVerImagenes(grupo.Color, 0, grupo.Grupo.Nombre)">
                                                        <span class="fa fa-eye"></span>
                                                    </a>
                                                                                            
                                                </label>
                                            </span> 
                                            
                                        </div>
                                    </div>
                                            
                               </div>
                           </div>
                           
                        </div>
                           
                    </div>
                    
                </div>
               
                
                
                <!-------- mensaje de error ---->
                <div class="row">
                    <div class="col-xs-12">
                        <div ng-repeat="error in mensajeError">
                            <span class="textoError">{{error}}</span>
                        </div>
                    </div>
                </div>
                <br>
                <!---- botones de operacion -->
                <div class="row">
                    <div class="col-xs-6">
                        <a class="btn botonOperacionModal btn-block" ng-click="AnteriorPresupuesto()">&lt;&lt; ANTERIOR</a>
                    </div>

                    <div class="col-xs-6">
                        <a focus class="btn botonOperacionModal btn-block" ng-click="TerminaPaso7()">SIGUIENTE &gt;&gt;</a>
                    </div>
                </div>
            <br>
            </form> 
               
             <!-- Paso 8 -->
            <form name="presupuesto8Forma" ng-show="pasoPresupuesto == 8"> 
                <div class="row">
                    <div class="col-xs-12 tituloPaso">
                        <span>Cubierta de Piedra</span>
                    </div>
                </div>
                <br><br>
                
                <!-- ubicaciones -->
                <div class="row">
                   <div class="col-xs-12 ">
                       <span class="textoInstruccion">Selecciona las ubicaciones a presupuestar.</span>
                   </div>
               </div>
                <br>
                <div class="row">
                  
                   <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:15px" ng-repeat="ubicacion in ubicacion | orderBy:'UbicacionCubiertaId'" ng-show="ubicacion.Activo">
                          
                       <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: ubicacion.Seleccionado}">
                           <input  type="checkbox" class="badgeboxPre" ng-model="ubicacion.Seleccionado">
                           <span class="badge">&check;</span>
                           <span> {{ubicacion.Nombre}}</span> 
                       </label>
                           
                    </div>
                    
                </div>
                <br>
                
                 <!--  elemento -->
                <div class="row">
                   <div class="col-xs-12 ">
                       <span class="textoInstruccion">Indica las secciones de cada cubierta.</span>
                   </div>
               </div>
                <br>
                
                <div class="row">
                    <div class="col-xs-12">
                       <div ng-repeat="ubicacion in ubicacion | orderBy:'UbicacionCubiertaId'" >
                            <a href="" class="btn btn-block botonAcordionPerfil {{GetClaseTab(ubicacion.Nombre)}}" ng-class="{disabled: !ubicacion.Seleccionado}" ng-click="CambiarTab(ubicacion.Nombre)">
                                {{ubicacion.Nombre}}
                                <span class="fa fa-chevron-down pull-right" style="width:20px;" ng-if="tabSeleccionada != ubicacion.Nombre"></span>
                                <span class="fa fa-chevron-up pull-right" style="width:20px;" ng-if="tabSeleccionada == ubicacion.Nombre"></span>
                            </a>
                            
                            <div class="row" ng-show="tabSeleccionada == ubicacion.Nombre && ubicacion.Seleccionado">
                               <div class="col-xs-12">

                                   <div class="contenedorAcordio">
                                       <br>

                                       <div class="row">
                                          <div class="col-xs-5">
                                              <div class="entrada2">
                                                  <input required ng-pattern="erNumeroFraccionSinCero" type="text" class="entrada form-control" ng-model="ubicacion.Lado1">
                                                  <label>Lado 1(pulg)</label>
                                              </div>
                                          </div>
                                          
                                          <div class="col-xs-5">
                                              <div class="entrada2">
                                                  <input required ng-pattern="erNumeroFraccionSinCero" type="text" class="entrada form-control" ng-model="ubicacion.Lado2">
                                                  <label>Lado 2(pulg)</label>
                                              </div>
                                          </div>
                                          
                                          <div class="col-xs-2">
                                              <div class="entrada2">
                                                  <a class="btn botonAgregarAcordion pull-right" href="" ng-click="AgregarElementoUbicacion(ubicacion)">
                                                      <span class="fa fa-plus"></span>
                                                  </a>
                                              </div>
                                          </div>
                                     </div>
                                     
                                     <br>
                                     <div class="row">
                                         <div class="col-xs-12">
                                             <span class="textoError">{{ubicacion.MensajeError}}</span>
                                         </div>
                                     </div>
                                      <br>
                                      
                                      <!-- Contador de secciones por cubierta -->
                                    <div class="row" ng-if="ubicacion.Elemento.length > 0">
                                        <div class="col-xs-12">
                                            <span class="textoNumeroTipoModulo">{{ubicacion.Elemento.length}}</span>
                                            <spna class="textoTipoModulo" ng-if="ubicacion.Elemento.length == 1"> Sección</spna> 
                                            <spna class="textoTipoModulo" ng-if="ubicacion.Elemento.length > 1"> Secciones</spna> 
                                        </div>
                                    </div>

                                     <div class="table-responsive tablePerfilClienteDatos" ng-show="ubicacion.Elemento.length > 0">
                                        <table class="table table-hover table-striped table-condensed">
                                            <thead class="TituloTabla">
                                              <tr>
                                                <th><span><b>Lado 1</b></span></th>
                                                <th><span><b>Lado 2</b></span></th>
                                                <th class="text-center"><span><b>Quitar</b></span></th>

                                              </tr>
                                            </thead>
                                            <tbody >
                                              <tr ng-repeat="elemento in ubicacion.Elemento">

                                                 <td>{{elemento.Lado1}}</td>
                                                 <td>{{elemento.Lado2}}</td>

                                                <td class="text-center">
                                                    <a  class="BotonOperacion" href=""  ng-click="QuitarElementoUbicacion(ubicacion, $index)" >
                                                        <span class="fa fa-times fa-2x"></span>
                                                    </a>
                                                </td>

                                              </tr>
                                            </tbody>
                                        </table>
                                    </div>

                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <br>
                
                <!-- Materiales de cubierta de piedra -->
                <div class="row">
                   <div class="col-xs-12 ">
                       <span class="textoInstruccion">Selecciona los materiales a presupuestar.</span>
                   </div>
               </div>
               <br>
                
                <div class="row">
                  
                   <div class="col-xs-12 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:15px" ng-repeat="cubierta in cubierta | orderBy:'Material.Nombre'" ng-if="cubierta.TipoCubierta.TipoCubiertaId == '2'" ng-show="cubierta.Material.Activo && MostrarMaterial(cubierta.Grupo)" >
                        <div class="tituloOpcionPresupuesto">
                            <span class="textoTituloOpcionPresupuesto" style="font-size:20px;"> {{cubierta.Material.Nombre}}</span>
                        </div>
                        
                        <div class="panelItemPresupuesto itemPuerta">
                        
                            <div class="row">
                               <div class="col-xs-12">
                                                           
                                    <div  ng-repeat="grupo in cubierta.Grupo | orderBy:'Grupo.Nombre'" ng-show="grupo.Grupo.Activo && grupo.Color.length > 0">
                                        <div class=" itemPresupuesto" style="margin-left: 0px" ng-class="{itemPresupuestoPrimero: $first}">
                                        
                                               
                                            <span class="checkbox checkboxOperativo">
                                                <label style="width:100%">
                                                    <input  ng-model="grupo.PorDefecto" type="checkbox" >
                                                    <span class="cr"> <i class="cr-icon fa fa-check"></i> </span>
                                                    <span>{{grupo.Grupo.Nombre}}</span>
                                                    
                                                    <a class="btn botonIconoFa pull-right" href="" ng-click="AbrirModalVerImagenes(grupo.Color, 0, grupo.Grupo.Nombre)">
                                                        <span class="fa fa-eye"></span>
                                                    </a>
                                                                                            
                                                </label>
                                            </span>
                                            
                                            
                                        </div>
                                        
                                    </div>
                                            
                               </div>
                           </div>
                           
                        </div>
                           
                    </div>
                    
                </div>
                
                <br>

                <!-------- mensaje de error ---->
                <div class="row">
                    <div class="col-xs-12">
                        <div ng-repeat="error in mensajeError">
                            <span class="textoError">{{error}}</span>
                        </div>
                    </div>
                </div>
                <br>
                <!---- botones de operacion -->
                <div class="row">
                    <div class="col-xs-6">
                        <a class="btn botonOperacionModal btn-block" ng-click="AnteriorPresupuesto()">&lt;&lt; ANTERIOR</a>
                    </div>

                    <div class="col-xs-6">
                        <a focus class="btn botonOperacionModal btn-block" ng-click="TerminarPaso8()">SIGUIENTE &gt;&gt;</a>
                    </div>
                </div>
                <br>
            </form>
            
            <!-- Paso 9 -->
            <div name="presupuesto9Forma" ng-show="pasoPresupuesto == 9">
             
               <div ng-if="presupuesto.Proyecto.TipoProyecto.Mueble">
                <!-- Descripción Combinacion -->        
                    <div class="row">
                        <div class="col-sm-12" ng-repeat="tipo in tipoCombinacion" ng-if="tipo.Combinacion > 0">
                             <div class="">
                                <label class="labelEntrada">
                                    Descripción para las combinaciones: 
                                    <span ng-repeat="comibinacion in tipo.Combinacion">
                                        <span ng-if="$first">{{comibinacion.Nombre}}, </span>
                                        <span ng-if="$first">{{comibinacion.Nombre}}.</span>
                                    </span>
                                </label>
                                
                                <textarea required type="text"  class="form-control descripcionArea" ng-model="tipo.Descripcion" ng-maxlength="1000" style="min-height: 100px"></textarea>
                            </div>
                            <br>
                        </div>
                    </div>
                </div>
                
                 <!-- Título -->            
                <div class="row">
                    <div class="col-sm-12">
                         <div class="">
                            <label class="labelEntrada">Título*</label>
                            <textarea required type="text"  class="form-control descripcionArea" name="titulo" ng-model="presupuesto.Titulo" ng-maxlength="500" style="min-height: 50px"></textarea>
                        </div>
                    </div>
                </div>
                <br>
              
                <!-- Descripción Cliente -->            
                <div class="row">
                    <div class="col-sm-12">
                         <div class="">
                            <label class="labelEntrada">Descripción Cliente*</label>
                            <textarea required type="text"  class="form-control descripcionArea" name="descripcionCliente" ng-model="presupuesto.DescripcionCliente" ng-maxlength="500" style="min-height: 100px"></textarea>
                        </div>
                    </div>
                </div>
                <br>
                
                <!-- Descripción Interna -->            
                <div class="row">
                    <div class="col-sm-12">
                         <div class="">
                            <label class="labelEntrada">Nota Interna</label>
                            <textarea type="text"  class="form-control descripcionArea" name="descripcionInterna" ng-model="presupuesto.DescripcionInterna" ng-maxlength="500" style="min-height: 100px"></textarea>
                        </div>
                    </div>
                </div>
                <br>
                
                <!-------- mensaje de error ---->
                <div class="row">
                    <div class="col-xs-12">
                        <div ng-repeat="error in mensajeError">
                            <span class="textoError">{{error}}</span>
                        </div>
                    </div>
                </div>
                <br>
                <!---- botones de operacion -->
                <div class="row">
                    <div class="col-xs-6">
                        <a class="btn botonOperacionModal btn-block" ng-click="AnteriorPresupuesto()">&lt;&lt; ANTERIOR</a>
                    </div>

                    <div class="col-xs-6">
                        <a focus class="btn botonOperacionModal btn-block" ng-click="TerminarPaso9()">SIGUIENTE &gt;&gt;</a>
                    </div>
                </div>
                <br>
               
            </div>
              
            <!-- Paso 10 -->
            <div name="presupuesto10Forma" ng-show="pasoPresupuesto == 10">
                
                <div class=" row">
                    <div class="col-xs-12">
                        <span class="textoInstruccion">Selecciona las opciones elegidas por {{presupuesto.Persona.Nombre}}</span>
                        <a class="pull-right botonOperacionRecto btn" ng-click="CrearPresupuestoBasico()">Presupuesto Básico</a>
                    </div>
                </div>
                   
                <div class="row"> <div class="col-xs-12"></div> <div style="margin-top: 7px"></div></div>
                    
                
                <!-- Divisor -->
                <div ng-if="presupuesto.Proyecto.TipoProyecto.Mueble">
                    <div class="divisorGis1"></div>

                    <!-- Combinacion -->
                    <div class="tituloOptPresupuesto"> Combinación </div><br>  
                    <div class="row">
                        <div ng-repeat="combinacion in combinacion | orderBy:'PrecioVentaModulo'" ng-show="combinacion.Activo && combinacion.PorDefecto">
                            <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:10px">

                                <!--<div class="input-group">-->

                                   <label class="btn checkBoxActivoPre text-center" ng-class="{checkBoxActivoPreNaranja: combinacion.Presupuesto}">
                                       <input  type="checkbox" class="badgeboxPre" ng-model="combinacion.Presupuesto"> <!-- ng-change="CambiarCombinacionPresupuesto(combinacion);" -->
                                       <span class="badge">&check;</span>
                                       <span> {{combinacion.Nombre}}</span> 
                                   </label>


                                <div class="panelItemPresupuesto itemPuerta text-center price">

                                    {{combinacion.PrecioVentaModulo | currency}}

                                </div>

                            </div>

                        </div>

                    </div>
                
                    <!-- Divisor -->
                    <div class="divisorGis1"></div>

                    <!-- Puertas -->
                    <div class="tituloOptPresupuesto"> Puertas </div><br>
                    <div class="row">
                        <div ng-repeat="muestrario in muestrario | orderBy:'PrecioVenta'" ng-show="muestrario.Activo && muestrario.PorDefecto">
                            <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:10px;">

                                <!--<div class="input-group">-->

                               <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: muestrario.Presupuesto}">
                                   <input  type="checkbox" class="badgeboxPre" ng-model="muestrario.Presupuesto" ng-change="CambiarMuestrarioPresupuesto(muestrario);">
                                   <span class="badge">&check;</span>
                                   <span> {{muestrario.Nombre}}</span> 
                               </label>

                                <div class="panelItemPresupuesto itemPuerta" >

                                    <div ng-repeat="combinacion in muestrario.Combinacion | orderBy:'PrecioVenta'" > <!-- ng-class="{opcionSeleccionadaPresupuestoEst: (combinacion.CombinacionMaterialId == combinacionSeleccionada)}" -->
                                        <div class="itemPresupuestoEstatico" style="margin-left: 0px; " ng-class="{itemPresupuestoPrimero: $first}">
                                            <span style="margin-left: 8px;" >{{combinacion.Nombre}}</span>
                                            <span class="pull-right" style="margin-right: 8px; ">{{combinacion.PrecioVenta | currency}}</span>
                                        </div>
                                    </div>

                                </div>

                            </div>

                        </div>

                    </div>
                
                    <!-- Divisor -->
                    <div ng-if="(servicio | filter:{Activo:true, Obligatorio:true}).length > 0">
                        <div class="divisorGis1"></div>

                        <!-- Servicios -->
                        <div class="tituloOptPresupuesto"> Servicios </div><br>
                        <div class="row">
                            <div ng-repeat="servicio in servicio | orderBy:'Nombre'" ng-show="servicio.Obligatorio && servicio.Activo">
                                <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:10px">

                                    <!--<div class="input-group">-->

                                       <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: servicio.Presupuesto}">
                                           <input  type="checkbox" class="badgeboxPre" ng-model="servicio.Presupuesto">
                                           <span class="badge">&check;</span>
                                           <span> {{servicio.Nombre}}</span> 
                                       </label>

                                    <div>
                                        <div class="panelItemPresupuesto itemPuerta text-center price">

                                            {{servicio.Subtotal | currency}}

                                        </div>
                                    </div>


                                </div>

                            </div>

                        </div>
                    </div>
                
                    <!-- Divisor -->
                    <div class="divisorGis1"></div>

                     <!-- Maqueo -->
                    <div class="tituloOptPresupuesto"> Maqueo </div><br>
                    <div class="row">
                        <div ng-repeat="maqueo in maqueo | orderBy:'Subtotal'" ng-show="maqueo.PorDefecto && maqueo.Activo">
                            <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:10px">

                                <!--<div class="input-group">-->

                                   <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: maqueo.Presupuesto}">
                                       <input  type="checkbox" class="badgeboxPre" ng-model="maqueo.Presupuesto" ng-change="CambiarMaqueoPresupuesto(maqueo)">
                                       <span class="badge">&check;</span>
                                       <span> {{maqueo.Nombre}}</span> 
                                   </label>

                                <div>
                                    <div class="panelItemPresupuesto itemPuerta text-center price">

                                        {{maqueo.Subtotal | currency}}

                                    </div>
                                </div>


                            </div>

                        </div>

                    </div> 
                
                    <!-- Divisor -->
                    <div class="divisorGis1"></div>

                    <!-- Accesorios -->
                    <div ng-repeat="tipo in tipoAccesorio | orderBy:'Nombre'" ng-show="tipo.Presupuesto">
                        <div class="row">
                           <span><div class="tituloOptPresupuesto col-xs-12" >{{tipo.Cantidad}} {{tipo.Nombre}} </div><br><br></span>
                            <div ng-repeat="muestrario in tipo.Muestrario | orderBy:'Subtotal'" ng-show=" muestrario.Accesorio.length > 0 && muestrario.Activo && muestrario.PorDefecto" >

                               

                                <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:10px">

                                    <!--<div class="input-group">-->

                                       <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: muestrario.Presupuesto}">
                                           <input  type="checkbox" class="badgeboxPre" ng-model="muestrario.Presupuesto" ng-change="CambiarAccesorioPresupuesto(tipo, muestrario)">
                                           <span class="badge">&check;</span>
                                           <span> {{muestrario.Nombre}}</span> 
                                       </label>

                                    <div ng-if="tipo.ClaseAccesorio.ClaseAccesorioId == '1'">
                                        <div class="panelItemPresupuesto itemPuerta text-center price">

                                            {{muestrario.Subtotal | currency}}

                                        </div>
                                    </div>

                                    <div ng-if="tipo.ClaseAccesorio.ClaseAccesorioId == '2'">
                                        <div class="panelItemPresupuesto itemPuerta" style="height: auto">

                                            <div ng-repeat="combinacion in muestrario.Combinacion | orderBy:'Subtotal'" > <!-- ng-class="{opcionSeleccionadaPresupuestoEst: (combinacion.CombinacionId == combinacionSeleccionada)}" -->
                                                <div class="itemPresupuestoEstatico" style="margin-left: 0px !important" ng-class="{itemPresupuestoPrimero: $first}">
                                                    <span style="margin-left:8px; font-style: normal;">{{combinacion.Nombre}}</span>
                                                    <span class="pull-right" style="margin-right:8px; font-style: normal; !important">{{combinacion.Subtotal | currency}}</span>
                                                </div>
                                            </div>

                                        </div>
                                    </div>


                                </div>

                            </div>

                        </div>

                        <!-- Divisor -->
                        <div class="divisorGis1"></div> 
                    </div>
                </div>
                
                <!-- Cubiertas -->
                
                <div ng-if="presupuesto.Proyecto.TipoProyecto.CubiertaAglomerado || presupuesto.Proyecto.TipoProyecto.CubiertaPiedra"><!--  -->
                   <span class="tituloOptPresupuesto"> Cubierta </span><br>

                   <span class="textoInstruccion">Selecciona el tipo de cubierta</span><br>
                   <div class="row">
                      <div ng-repeat="tipo in tipoCubierta | orderBy:'Nombre'" ng-show="tipo.PorDefecto && MostrarCubiertaSeleccionPresupuesto(tipo.TipoCubiertaId) "> <!--- && tipo.TipoCubiertaId == '1' -->
                           <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:15px">

                               <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: tipo.Presupuesto}">
                                   <input  type="checkbox" class="badgeboxPre" ng-model="tipo.Presupuesto" ng-click="CambiarTipoCubiertaPresupuesto(tipo)">
                                   <span class="badge">&check;</span>
                                   <span> {{tipo.Nombre}}</span> 
                               </label>

                            </div>
                        </div>
                    </div>
                    <br>
                    
                    <span ng-show="tipoCubiertaPresupuesto == '2' || tipoCubiertaPresupuesto == '1'">
                        <span class="textoInstruccion" >Selecciona la ubicación de la cubierta</span><br>
                    </span>
                    <div class="row">
                      <div ng-repeat="ubicacion in ubicacion | orderBy:'UbicacionId'" ng-show="ubicacion.Activo && ubicacion.Seleccionado && tipoCubiertaPresupuesto == '2'"><!--  -->
                           <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:15px">

                               <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: ubicacion.Presupuesto}">
                                   <input  type="checkbox" class="badgeboxPre" ng-model="ubicacion.Presupuesto" ng-click="CambiarUbicionCubiertaPiedra(ubicacion)">
                                   <span class="badge">&check;</span>
                                   <span> {{ubicacion.Nombre}}</span> 
                               </label>

                            </div>
                        </div>
                    </div>
                    
                    <div class="row">
                      <div ng-repeat="ubicacion in ubicacion | orderBy:'UbicacionId'" ng-show="ubicacion.Activo && ubicacion.SeleccionadoAglomerado && tipoCubiertaPresupuesto == '1'">
                           <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:15px">

                               <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: ubicacion.Presupuesto}">
                                   <input  type="checkbox" class="badgeboxPre" ng-model="ubicacion.Presupuesto" ng-click="CambiarUbicionCubiertaAglomerado(ubicacion)">
                                   <span class="badge">&check;</span>
                                   <span> {{ubicacion.Nombre}}</span> 
                               </label>

                            </div>
                        </div>
                    </div>
                
                    <span class="textoInstruccion" ng-show="tipoCubiertaPresupuesto">Selecciona un material</span><br ><!-- ng-show="tipoCubiertaPresupuesto == '2' " -->
                    <div class="row">
                      <div ng-repeat="cubierta in cubierta | orderBy:'Material.Nombre'" ng-show="tipoCubiertaPresupuesto  && cubierta.TipoCubierta.TipoCubiertaId == tipoCubiertaPresupuesto"><!-- ng-show=" tipoCubiertaPresupuesto == '2' && cubierta.TipoCubierta.TipoCubiertaId == '2'" -->
                           <div ng-repeat="grupo in cubierta.Grupo | orderBy:'Total'" ng-show="grupo.PorDefecto && grupo.Grupo.Activo && grupo.Color.length > 0">
                               <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:15px">

                                   <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: grupo.Presupuesto}">
                                       <input  type="checkbox" class="badgeboxPre" ng-model="grupo.Presupuesto" ng-click="SeleccionarMaterialCubierta(grupo)">
                                       <span class="badge">&check;</span>
                                       <span> {{cubierta.Material.Nombre}} {{grupo.Grupo.Nombre}}</span> 
                                   </label>

                                   <div>
                                        <div class="panelItemPresupuesto itemPuerta text-center price">

                                            {{grupo.Total | currency}}

                                        </div>
                                    </div>

                                </div>
                          </div>
                        </div>
                    </div>
                    
                    <!--<div ng-if="MotrarLabelCubiertaAglomerado13()">
                        <span class="textoInstruccion" ng-show="tipoCubiertaPresupuesto == '1' ">Selecciona un material para la cubierta y la barra</span><br>
                        <div class="row">
                          <div ng-repeat="cubierta in cubierta | orderBy:'Material.Nombre'" ng-if=" tipoCubiertaPresupuesto == '1' && cubierta.TipoCubierta.TipoCubiertaId == '1' && MostrarCubiertaAglomerado13(cubierta.Ubicacion)"><!-- 1 y 3 el id de las ubicaciones de cubierta y barra --
                               <div ng-repeat="grupo in cubierta.Grupo | orderBy:'Total'" ng-show="grupo.PorDefecto && grupo.Grupo.Activo && grupo.Color.length > 0">
                                   <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:15px">

                                       <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: grupo.Presupuesto}">
                                           <input  type="checkbox" class="badgeboxPre" ng-model="grupo.Presupuesto" ng-click="SeleccionarMaterialAglomerado13(grupo)">
                                           <span class="badge">&check;</span>
                                           <span> {{cubierta.Material.Nombre}} {{grupo.Grupo.Nombre}}</span> 
                                       </label>

                                       <div>
                                            <div class="panelItemPresupuesto itemPuerta text-center price">

                                                ${{grupo.Total}}

                                            </div>
                                        </div>

                                    </div>
                              </div>
                            </div>
                        </div>
                    </div>
                    
                    <div ng-if="MotrarLabelCubiertaAglomerado24()">
                        <span class="textoInstruccion" ng-show="tipoCubiertaPresupuesto == '1' ">Selecciona un material para el backsplash y la Isla</span><br>
                        <div class="row">
                          <div ng-repeat="cubierta in cubierta | orderBy:'Material.Nombre'" ng-if="tipoCubiertaPresupuesto == '1' && cubierta.TipoCubierta.TipoCubiertaId == '1' && MostrarCubiertaAglomerado24(cubierta.Ubicacion)"> <!-- 2 y 4 el id de las ubicaciones de backsplash e isla --
                               <div ng-repeat="grupo in cubierta.Grupo | orderBy:'Total'" ng-show="grupo.PorDefecto && grupo.Grupo.Activo && grupo.Color.length > 0">
                                   <div class="col-xs-6 col-sm-6 col-md-4 col-lg-4" style="margin-bottom:15px">

                                       <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: grupo.Presupuesto}">
                                           <input  type="checkbox" class="badgeboxPre" ng-model="grupo.Presupuesto" ng-click="SeleccionarMaterialAglomerado24(grupo)">
                                           <span class="badge">&check;</span>
                                           <span> {{cubierta.Material.Nombre}} {{grupo.Grupo.Nombre}}</span> 
                                       </label>

                                       <div>
                                            <div class="panelItemPresupuesto itemPuerta text-center price">

                                                ${{grupo.Total}}

                                            </div>
                                        </div>

                                    </div>
                              </div>
                            </div>
                        </div>
                    </div>-->

                    <!-- Divisor -->
                    <div class="divisorGis1"></div> 

                </div>

                <!-------- mensaje de error ---->
                <div class="row">
                    <div class="col-xs-12">
                        <div ng-repeat="error in mensajeError">
                            <span class="textoError">{{error}}</span>
                        </div>
                    </div>
                </div>
                <br>
                <!---- botones de operacion -->
                <div class="row">
                   <div class="col-xs-6" ng-if="pasoMinimo == 10">
                        <button class="btn botonOperacionModal btn-block" data-dismiss="modal" aria-label="Close" ng-click="CerrarPresupuestoModal()">CANCELAR</button>
                    </div>
                    
                    <div class="col-xs-6" ng-if="pasoMinimo != 10">
                        <a class="btn botonOperacionModal btn-block" ng-click="AnteriorPresupuesto()">&lt;&lt; ANTERIOR</a>
                    </div>

                    <div class="col-xs-6">
                        <a focus class="btn botonOperacionModal btn-block" ng-click="TerminarPaso10()">SIGUIENTE &gt;&gt;</a>
                    </div>
                </div>
                <br>
            </div>
               
            <!-- Paso 11 -->
            <div name="presupuesto10Forma" ng-show="pasoPresupuesto == 11">
              
              
               <!-- Promocion -->
               <div class="row">
                    <div class="col-xs-12">
                        <a class="btn btn-block botonAcordionPerfil" ng-class="{active: verPromo}" ng-click="verPromo = !verPromo">
                            <span class="fa fa-chevron-right" style="width:20px;" ng-if="!verPromo"></span>
                            <span class="fa fa-chevron-up" style="width:20px;" ng-if="verPromo"></span>
                            Promociones
                        </a>
                    </div>
                </div>
                
                <div class="row" ng-show="verPromo">
                   <div class="col-xs-12">
                       <div class="contenedorAcordio">
                          
                          <div ng-if="personaSeleccionada && !promoActualizar && opt != 'Personalizar'" class="row">
                             <div class="col-xs-12">
                                  <a class="btn botonOperacionRecto pull-right" ng-click="ActualizarPromocion()" >
                                      <span class="fa fa-refresh"> </span> Actualizar
                                  </a>
                              </div>
                          </div>
                          <br ng-if="personaSeleccionada && !promoActualizar">
                           
                           
                            <div class="table-responsive tablePerfilClienteDatos" ng-if="(promocion | filter:{Activo:true, Show:true, TipoVenta:{TipoVentaId:'1'}}).length > 0">
                                <table class="table table-hover table-striped table-condensed">
                                    <thead class="TituloTabla">
                                      <tr>
                                        <th><span><b>Presupuestar</b></span></th>
                                        <th><span class=""><b>Promoción</b></span></th>
                                        <th class="text-center"><span><b>Vigencia</b></span></th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      <tr ng-repeat="promo in promocion | orderBy:'DescuentoMinimo'"  ng-show="promo.TipoVenta.TipoVentaId == '1' && promo.Activo && promo.Show">

                                            <td>
                                                <div class="checkboxOperativo" style="margin-left:0px !important">
                                                    <label>
                                                        <input  ng-model="promo.Presupuesto" type="checkbox" value="">
                                                        <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                                                    </label>
                                                </div>
                                            </td>

                                            <td>
                                                <span ng-if="promo.TipoPromocion.TipoPromocionId == '1' || promo.TipoPromocion.TipoPromocionId == '3'">{{promo.DescuentoMinimo}}% de descuento</span>
                                                <span ng-if="promo.TipoPromocion.TipoPromocionId == '2'">{{promo.NumeroPagos}} meses sin intereses </span>
                                            </td>
                                            
                                            <td class="text-center">
                                                <span ng-if="promo.TipoPromocion.TipoPromocionId == '1' || promo.TipoPromocion.TipoPromocionId == '3'">{{promo.FechaLimite}}</span>
                                            </td>
        
                                      </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div ng-if="(promocion | filter:{Activo:true, Show:true, TipoVenta:{TipoVentaId:'1'}}).length == 0">
                                <span class="textoPerfilHome">Sin Promociones</span>
                            </div>
                           
                        </div>
                    </div>
                </div>
              
                <!-- combinacion -->
                <div id="Hoja1">
                    <div class="row">
                       <div class="col-xs-12">
                            <div class="table-responsive tablePerfilClienteDatos">
                                <table class="table table-hover table-striped table-condensed" id="combinacionTabla">
                                    <thead class="TituloTabla">
                                      <tr>
                                        <th> </th>
                                        <th class="text-center" ng-repeat="combinacion in combinacion | orderBy:'Total'" ng-if="combinacion.Activo && combinacion.PorDefecto"><span><b>{{combinacion.Nombre}}</b></span></th>
                                      </tr>
                                    </thead>
                                    <tbody >

                                      <tr>
                                           <td> </td>
                                            <td class="text-center" ng-repeat="combinacion in combinacion | orderBy:'Total'" ng-show="combinacion.Activo && combinacion.PorDefecto">{{combinacion.Total.toFixed(2) | currency}} </td>
                                      </tr>


                                      <tr  ng-repeat="promo in promocion | orderBy:'DescuentoMinimo'" ng-show="promo.TipoVenta.TipoVentaId == '1' && promo.Presupuesto && promo.Show">
                                           <td>
                                               <span ng-if="promo.TipoPromocion.TipoPromocionId == '1' || promo.TipoPromocion.TipoPromocionId == '3'">{{promo.DescuentoMinimo}}% de descuento</span>
                                                <span ng-if="promo.TipoPromocion.TipoPromocionId == '2'">{{promo.NumeroPagos}} pagos de</span>
                                           </td>

                                          <td class="text-center" ng-repeat="combinacion in combinacion | orderBy:'Total'" ng-show="combinacion.Activo && combinacion.PorDefecto">{{CalcularPromocionTotalCubierta(combinacion.Total, promo) | currency}} </td>
                                      </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                
                    <!-- Incluye -->
                    <div class="row">
                        <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3 text-center">
                           <div class="miCocinaTitulo">
                                <span > {{presupuesto.Proyecto.TipoProyecto.Nombre}} </span>
                            </div>
                        </div>

                        <div class="col-xs-12 col-sm-8 col-sm-offset-2 col-md-6 col-md-offset-3">
                            <div class="panelMiCocina" style="width: auto">
                                <div class="text-center">
                                    <b class="tituloSeccion" style="width: 100%">Incluye</b>

                                    <div class="separadorGris1"></div>

                                    <div class="listaMiCocina text-left">

                                        <span>Módulos</span> 

                                        <div class="separadorGris1"></div>

                                        <span>Puertas: {{presupuesto.Puerta.Nombre}}</span>

                                        <div class="separadorGris1"></div>

                                        <span>Maqueo: {{presupuesto.Maqueo.Nombre}}</span>  

                                        <div class="separadorGris1"></div>

                                        <span ng-if="presupuesto.Servicio.length > 0">Servicios: <br>
                                          <ul>
                                              <li ng-repeat="servicio in presupuesto.Servicio">
                                                  {{servicio.Nombre}}
                                              </li>
                                          </ul>
                                        </span>

                                        <div class="separadorGris1" ng-if="presupuesto.Servicio.length > 0"></div>

                                        <span>Accesorios: <br>
                                          <ul>
                                              <li ng-repeat="accesorio in presupuesto.Accesorio | orderBy:'Nombre'">
                                                  <span ng-if="accesorio.Contable">{{accesorio.Cantidad}} </span>
                                                  {{accesorio.Nombre}}: {{accesorio.Muestrario}}
                                              </li>
                                          </ul>
                                        </span>

                                    </div>

                                    <div ng-if="tipoCubiertaPresupuesto == '1'">
                                        <div class="separadorGris1"></div>
                                         <b class="tituloSeccion text-center" style="width: 100%">Cubiertas de Aglomerado</b>

                                         <div class="separadorGris1"></div>
                                          <ul >
                                              <li ng-repeat="cubierta in presupuesto.Cubierta" style="text-align: left !important;">
                                                  <span class="listaMiCocina text-left">{{cubierta}}</span>
                                              </li>
                                          </ul>
                                    </div>

                                    <!--<div ng-if="tipoCubiertaPresupuesto == '2'">
                                        <div class="separadorGris1"></div>
                                         <b class="tituloSeccion text-center" style="width: 100%">Cubiertas de {{presupuesto.CubiertaPiedra}}</b>

                                         <div class="separadorGris1"></div>
                                          <ul >
                                              <li ng-repeat="ubicacion in ubicacion" ng-if="ubicacion.Seleccionado && ubicacion.Presupuesto==true" style="text-align: left !important;">
                                                  <span class="listaMiCocina text-left">{{ubicacion.Nombre}}</span>
                                              </li>
                                          </ul>
                                    </div>-->

                                </div>
                            </div>
                        </div>
                    
                    </div>
                </div>
                <!-- Plan de pago -->
                <!--<div class="row">
                    <div class="col-xs-12">
                         <span class="textoInstruccion" >Selecciona un plan de pagos</span><br>
                    </div>
                    
                    <div class="">
                        <label class="btn checkBoxActivoPre" ng-class="{checkBoxActivoPreNaranja: grupo.Presupuesto}">
                           <input  type="checkbox" class="badgeboxPre" ng-model="grupo.Presupuesto" ng-click="SeleccionarMaterialCubierta(grupo)">
                           <span class="badge">&check;</span>
                           <span> {{cubierta.Material.Nombre}} {{grupo.Grupo.Nombre}}</span> 
                       </label>

                       <div>
                            <div class="panelItemPresupuesto itemPuerta text-center price">

                                ${{grupo.Total}}

                            </div>
                        </div>
                    </div>
                    
                </div>-->
                
                
                <!-------- mensaje de error ---->
                <div class="row">
                    <div class="col-xs-12">
                        <div ng-repeat="error in mensajeError">
                            <span class="textoError">{{error}}</span>
                        </div>
                    </div>
                </div>
                <br>
                <!---- botones de operacion -->
                <div class="row">
                    <div class="col-xs-6">
                        <a class="btn botonOperacionModal btn-block" ng-click="AnteriorPresupuesto()">&lt;&lt; ANTERIOR</a>
                    </div>

                    <div class="col-xs-6">
                        <a focus class="btn botonOperacionModal btn-block" ng-click="TerminarPaso11()">SIGUIENTE &gt;&gt;</a>
                    </div>
                </div>
                <br>
               
            </div>
              
            <!-- paso 12 -->
            <div name="presupuesto10Forma" ng-show="pasoPresupuesto == 12">
                
                <!-- Promoción -->
               <div class="row">
                    <div class="col-xs-12">
                        <a class="btn btn-block botonAcordionPerfil" ng-class="{active: verPromoCubierta}" ng-click="verPromoCubierta = !verPromoCubierta">
                            <span class="fa fa-chevron-right" style="width:20px;" ng-if="!verPromoCubierta"></span>
                            <span class="fa fa-chevron-up" style="width:20px;" ng-if="verPromoCubierta"></span>
                            Promociones de Cubierta
                        </a>
                    </div>
                </div>
                
                <div class="row" ng-show="verPromoCubierta">
                   <div class="col-xs-12">
                       <div class="contenedorAcordio">
                           
                           <div ng-if="personaSeleccionada && !promoActualizar && opt != 'Personalizar'" class="row">
                             <div class="col-xs-12">
                                  <a class="btn botonOperacionRecto pull-right" ng-click="ActualizarPromocion()" >
                                      <span class="fa fa-refresh"> </span> Actualizar
                                  </a>
                              </div>
                          </div>
                          <br ng-if="personaSeleccionada && !promoActualizar">
                           
                            <div class="table-responsive tablePerfilClienteDatos" ng-if="(promocion | filter:{Activo:true, Show:true, TipoVenta:{TipoVentaId:'2'}}).length > 0">
                                <table class="table table-hover table-striped table-condensed">
                                    <thead class="TituloTabla">
                                      <tr>
                                        <th><span><b>Presupuestar</b></span></th>
                                        <th><span class=""><b>Promoción</b></span></th>
                                        <th class="text-center"><span><b>Vigencia</b></span></th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      <tr ng-repeat="promo in promocion | orderBy:'DescuentoMinimo'" ng-show="promo.TipoVenta.TipoVentaId == '2' && promo.Show">

                                            <td>
                                                <div class="checkboxOperativo" style="margin-left:0px !important">
                                                    <label>
                                                        <input  ng-model="promo.Presupuesto" type="checkbox" value="">
                                                        <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                                                    </label>
                                                </div>
                                            </td>

                                            <td>
                                                <span ng-if="promo.TipoPromocion.TipoPromocionId == '1' || promo.TipoPromocion.TipoPromocionId == '3'">{{promo.DescuentoMinimo}}% de descuento</span>
                                                <span ng-if="promo.TipoPromocion.TipoPromocionId == '2'">{{promo.NumeroPagos}} meses sin intereses</span>
                                            </td>
                                            
                                            <td class="text-center">
                                                <span ng-if="promo.TipoPromocion.TipoPromocionId == '1' || promo.TipoPromocion.TipoPromocionId == '3'">{{promo.FechaLimite}}</span>
                                            </td>
        
                                      </tr>
                                    </tbody>
                                </table>
                            </div>
                            
                            <div ng-if="(promocion | filter:{Activo:true, Show:true, TipoVenta:{TipoVentaId:'2'}}).length == 0">
                                <span class="textoPerfilHome">Sin Promociones</span>
                            </div>
                           
                        </div>
                    </div>
                </div>
                
                <br>
                <!-- cubiertas -->
                <div class="row">
                   <div class="col-xs-12">
                        <div class="table-responsive">
                           
                           <div ng-repeat="cubierta in cubierta | orderBy:'Material.Nombre'" ng-if="cubierta.TipoCubierta.TipoCubiertaId == '2'">
                               <div ng-repeat="grupo in  cubierta.Grupo | orderBy:'TotalCubierta'" ng-if="grupo.Grupo.Activo && grupo.Color.length > 0 && grupo.PorDefecto">
                                    
                                    
                                    <table id="TitCub{{cubierta.Material.MaterialId}}-{{grupo.Grupo.GrupoId}}">
                                        <tr> <td> <b style="font-size:14pt" ng-class="{textoNaranja:(grupo.Presupuesto && tipoCubiertaPresupuesto == '2')}"> {{cubierta.Material.Nombre}} {{grupo.Grupo.Nombre}}</b> </td></tr>
                                    </table>
                                   
                                   
                                   
                                   <!-- Tabla -->
                                    <table class="table table-hover table-striped table-condensed" id="Cub{{cubierta.Material.MaterialId}}-{{grupo.Grupo.GrupoId}}">
                                        <thead class="TituloTabla">
                                          <tr>
                                            <th> </th>
                                            <th class="text-center" ng-repeat="ubicacion in ubicacion | orderBy:'UbicacionCubiertaId'" ng-if="ubicacion.Seleccionado && ubicacion.UbicacionCubiertaId != '3'"><span><b>{{ubicacion.Nombre}}</b></span></th>
                                            <th class="text-center"> Total </th>
                                           </tr>
                                        </thead>
                                        <tbody >

                                          <tr>
                                               <td> </td>
                                                <td class="text-center" ng-repeat="ubicacion in grupo.Ubicacion | orderBy:'UbicacionId'" ng-if="ubicacion.UbicacionId != '3'">{{ubicacion.Total | currency}} </td>
                                                <td class="text-center"> {{grupo.TotalCubierta | currency}} </td>
                                          </tr>


                                          <tr  ng-repeat="promo in promocion | orderBy:'DescuentoMinimo'" ng-show="promo.TipoVenta.TipoVentaId == '2' && promo.Presupuesto && promo.Show">
                                               <td>
                                                   <span ng-if="promo.TipoPromocion.TipoPromocionId == '1' || promo.TipoPromocion.TipoPromocionId == '3'">{{promo.DescuentoMinimo}}% de descuento</span>
                                                    <span ng-if="promo.TipoPromocion.TipoPromocionId == '2'">{{promo.NumeroPagos}} pagos de </span>
                                               </td>

                                              <td class="text-center" ng-repeat="ubicacion in grupo.Ubicacion | orderBy:'UbicacionId'" ng-if="ubicacion.UbicacionId != '3'">{{CalcularPromocionTotalCubierta(ubicacion.Total, promo) | currency}} </td>
                                              
                                              <td class="text-center"> {{CalcularPromocionTotalCubierta(grupo.TotalCubierta, promo) | currency}} </td>
                                          </tr>

                                        </tbody>
                                    </table>
                                
                                </div>
                                
                            </div>
                        </div>
                    </div>
                </div>
            
                <!-------- mensaje de error ---->
                <div class="row">
                    <div class="col-xs-12">
                        <div ng-repeat="error in mensajeError">
                            <span class="textoError">{{error}}</span>
                        </div>
                    </div>
                </div>
                <br>
                <!---- botones de operacion -->
                <div class="row">
                   <div class="col-xs-6" ng-if="pasoMinimo == 12">
                        <button class="btn botonOperacionModal btn-block" data-dismiss="modal" aria-label="Close" ng-click="CerrarPresupuestoModal()">CANCELAR</button>
                    </div>
                    
                    <div class="col-xs-6" ng-if="pasoMinimo != 12">
                        <a class="btn botonOperacionModal btn-block" ng-click="AnteriorPresupuestoPaso12()">&lt;&lt; ANTERIOR</a>
                    </div>

                    <div class="col-xs-6">
                        <a focus class="btn botonOperacionModal btn-block" ng-click="TerminarPaso12()">SIGUIENTE &gt;&gt;</a>
                    </div>
                </div>
                <br>
            </div>
              
            <!-- paso 13 -->
            <div name="presupuesto10Forma" ng-show="pasoPresupuesto == 13">
               
                <!-- Planes de pago -->
               <div class="row">
                    <div class="col-xs-12">
                        <a class="btn btn-block botonAcordionPerfil" ng-class="{active: verPlanPago}" ng-click="verPlanPago = !verPlanPago">
                            <span class="fa fa-chevron-right" style="width:20px;" ng-if="!verPlanPago"></span>
                            <span class="fa fa-chevron-up" style="width:20px;" ng-if="verPlanPago"></span>
                            Planes de pago
                        </a>
                    </div>
                </div>
                
                <div class="row" ng-show="verPlanPago">
                   <div class="col-xs-12">
                       <div class="contenedorAcordio">
                           
                           
                            <div class="table-responsive tablePerfilClienteDatos">
                                <table class="table table-hover table-striped table-condensed" id="precioCubierta">
                                    <thead class="TituloTabla">
                                      <tr>
                                        <th><span>Plan de pagos</span></th>
                                        <th class="text-center"><span><b>Fecha de entrega</b></span></th>
                                        <th class="text-center"><span><b>Pagos</b></span></th>
                                      </tr>
                                    </thead>
                                    <tbody>
                                      <tr ng-repeat="plan in planPago | orderBy:'FechaFin2'" ng-show="plan.Activo">

                                            <td>
                                                <div class="checkboxOperativo" style="margin-left:0px !important">
                                                    <label>
                                                        <input  ng-model="plan.Presupuesto" type="checkbox" value="" ng-change="CambiarPlan(plan)">
                                                        <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                                                        <span> {{plan.Nombre}}</span>
                                                    </label>
                                                </div>
                                            </td>

                                            <td class="text-center">
                                                <span> {{plan.FechaFin}} </span>
                                            </td>
                                            
                                            <td class="text-center">
                                                <span >{{plan.Pagos}}</span>
                                            </td>
        
                                      </tr>
                                    </tbody>
                                </table>
                            </div>
                           
                        </div>
                    </div>
                </div>
                <br>
                
                <div id="Hoja3">
                    <div ng-show="presupuesto.PlanPago.Abono.length > 0" class="fuente12">

                        <div class="row">

                          <div class="col-xs-12 ">
                              <div class="marcoDetalleTop">
                              </div>
                          </div>

                           <div class="col-xs-12 col-sm-6 ">
                                <b>Fecha de entraga: </b><span class="pull-right">{{presupuesto.PlanPago.FechaFin}}</span><br>
                           </div>

                           <div class="col-xs-12 hidden-sm hidden-md hidden-lg">
                              <div class="marcoDetalleTop">
                              </div>
                          </div>

                           <div class="col-xs-12 col-sm-6"  ng-class="{marcoDetalleLeft: (anchoPantalla > 767)}">
                                <b>Fecha Venta: </b><span class="pull-right">{{presupuesto.FechaVenta}}</span><br>
                           </div>

                        </div>

                        <div class="row">

                          <div class="col-xs-12 ">
                              <div class="marcoDetalleTop">
                              </div>
                          </div>

                           <div class="col-xs-12 col-sm-6 ">
                                <b>Plan de pagos: </b><span class="pull-right">{{presupuesto.PlanPago.Nombre}}</span><br>
                           </div>

                           <div class="col-xs-12 hidden-sm hidden-md hidden-lg">
                              <div class="marcoDetalleTop">
                              </div>
                          </div>

                           <div class="col-xs-12 col-sm-6"  ng-class="{marcoDetalleLeft: (anchoPantalla > 767)}">
                                <b>Pagos: </b><span class="pull-right">{{presupuesto.PlanPago.Pagos}}</span><br>
                           </div>

                        </div>

                        <div class="row">
                            <div class="col-xs-12 text-center">
                                <div class="tituloDetallePlan">Incluye</div>
                            </div>
                        </div>

                        <div class="row ">
                           <div class="col-xs-12 ">
                               <span>{{presupuesto.Proyecto.TipoProyecto.Nombre}}</span>
                           </div>

                           <!--<div class="col-xs-12 hidden-sm hidden-md hidden-lg">
                              <div class="marcoDetalleTop">
                              </div>
                          </div>

                           <div class="col-xs-12 col-sm-6" ng-class="{marcoDetalleLeft: (anchoPantalla > 767)}">
                               <b>Combinación: </b> {{presupuesto.Combinacion.Nombre}}<br>
                           </div>-->

                        </div>

                        <div class="row" ng-if="presupuesto.Proyecto.TipoProyecto.CubiertaPiedra && tipoCubiertaPresupuesto == '2'">

                          <div class="col-xs-12">
                              <div class="marcoDetalleTop">
                              </div>
                          </div>

                           <div class="col-xs-12 col-sm-6 marcoDetallePlan">
                               <span>Cubierta de {{presupuesto.CubiertaPiedra.Nombre}}</span>
                           </div>

                           <div class="col-xs-12 hidden-sm hidden-md hidden-lg">
                              <div class="marcoDetalleTop">
                              </div>
                          </div>

                           <div class="col-xs-12 col-sm-6 " ng-class="{marcoDetalleLeft: (anchoPantalla > 767)}">
                                <span ng-repeat="ubicacion in ubicacion" ng-if="ubicacion.Presupuesto == true && ubicacion.Seleccionado && ubicacion.UbicacionCubiertaId != '3'">
                                    {{ubicacion.Nombre}}<br>
                                </span>
                           </div>

                        </div>

                        <div class="row">
                            <div class="col-xs-12 text-center">
                                <div class="tituloDetallePlan">Promociones</div>
                            </div>
                        </div>

                        <div class="row text-left">
                            <div class="col-xs-12 text-left marcoDetallePlan">
                                <span><b>Promoción muebles: </b></span>
                                
                                <div class="pull-right " ng-class="{'btn-group' : presupuesto.PromocionMueble != 'Ninguno'}">
                                    <button  class="btn dropPromo " data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        <span ng-if="presupuesto.PromocionMueble == 'Ninguno'"> {{presupuesto.PromocionMueble}} </span>
                                        <span ng-if="presupuesto.PromocionMueble != 'Ninguno'"> {{presupuesto.PromocionMueble.Descuento}}% de descuento </span>
                                        <span class="fa fa-caret-down"></span>
                                    </button>
                                    
                                    <ul class="dropdown-menu dropdown-menu-right">
                                       <li > <a style="cursor:pointer" ng-click="CambiarPromocionMueble('Ninguno')">Ninguno</a> </li>

                                        <li  ng-repeat="promo in promocion | orderBy:'DescuentoMinimo'" ng-if="promo.TipoVenta.TipoVentaId == '1' && promo.Presupuesto && promo.Show && promo.Activo && promo.TipoPromocion.TipoPromocionId != '2'">
                                            <a style="cursor:pointer" ng-click="CambiarPromocionMueble(promo)">{{promo.DescuentoMinimo}}% de descuento</a>
                                        </li>
                                    </ul>
                                    
                                    <button class="btn dropPromo " ng-if="presupuesto.PromocionMueble != 'Ninguno'" ng-click="CambiarDescuento(presupuesto.PromocionMueble , -1)">
                                        <span class="fa fa-minus" ></span>
                                    </button>
                                    
                                    <button class="btn dropPromo " ng-if="presupuesto.PromocionMueble != 'Ninguno'" ng-click="CambiarDescuento(presupuesto.PromocionMueble , 1)">
                                        <span class="fa fa-plus"></span>
                                    </button>
                                </div>
                                
                                
                                

                            </div>
                        </div>

                        <div class="row text-left" ng-if="presupuesto.Proyecto.TipoProyecto.CubiertaPiedra && tipoCubiertaPresupuesto == '2'">

                           <div class="col-xs-12 ">
                              <div class="marcoDetalleTop">
                              </div>
                          </div>

                            <div class="col-xs-12 text-left marcoDetallePlan">
                                <span><b>Promoción cubierta: </b></span>
                                    <div class="pull-right " ng-class="{'btn-group' : presupuesto.PromocionCubierta != 'Ninguno'}">
                                        <button class="btn dropPromo" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                            <span ng-if="presupuesto.PromocionCubierta == 'Ninguno'"> {{presupuesto.PromocionCubierta}} </span>
                                            <span ng-if="presupuesto.PromocionCubierta != 'Ninguno'"> {{presupuesto.PromocionCubierta.Descuento}}% de descuento </span>
                                            <span class="fa fa-caret-down"></span>
                                        </button>
                                        <ul class="dropdown-menu dropdown-menu-right">
                                           <li > <a style="cursor:pointer" ng-click="CambiarPromocionCubierta('Ninguno')">Ninguno</a> </li>

                                            <li  ng-repeat="promo in promocion | orderBy:'DescuentoMinimo'" ng-if="promo.TipoVenta.TipoVentaId == '2' && promo.Presupuesto && promo.Show && promo.Activo && promo.TipoPromocion.TipoPromocionId != '2'">
                                                <a style="cursor:pointer" ng-click="CambiarPromocionCubierta(promo)">{{promo.DescuentoMinimo}}% de descuento</a>
                                            </li>
                                        </ul>

                                        <button class="btn dropPromo " ng-if="presupuesto.PromocionCubierta != 'Ninguno'" ng-click="CambiarDescuento(presupuesto.PromocionCubierta , -1)">
                                            <span class="fa fa-minus" ></span>
                                        </button>

                                        <button class="btn dropPromo " ng-if="presupuesto.PromocionCubierta != 'Ninguno'" ng-click="CambiarDescuento(presupuesto.PromocionCubierta , 1)">
                                            <span class="fa fa-plus"></span>
                                        </button>
                                </div>

                            </div>
                        </div>

                        <div class="row">
                            <div class="col-xs-12 ">
                              <div class="marcoDetalleTop">
                              </div>
                            </div>
                        </div>

                    </div>
                    <br><br>
                
                
                    <div class="row" ng-show="presupuesto.PlanPago.Abono.length > 0">

                       <div ng-repeat="combinacion in combinacion | orderBy:'TotalProyecto'" ng-if="combinacion.Presupuesto == true && combinacion.PorDefecto">
                            <div class="col-xs-12 col-sm-6 col-md-6 col-lg-4">

                            <div class="text-center">
                                   
                                   <div ng-show="flase">
                                       <table id="precio{{combinacion.CombinacionMaterialId}}">
                                            <tr>
                                                <td>{{combinacion.Nombre}}</td>
                                              </tr>

                                              <tr>
                                                <td>{{combinacion.TotalProyecto | currency}}</td>
                                              </tr>
                                        </table>
                                    </div>

                                   <div class="planPagoSelNegro">
                                        <b class="fuente16">{{combinacion.Nombre}}</b>
                                        <br>
                                    </div>

                                    <div class="planPagoSel">
                                        <b class="fuente14">{{combinacion.TotalProyecto | currency}}</b>
                                    </div>

                                    <div class="table-responsive">
                                        <table class="table table-hover table-striped table-condensed" id="pp{{combinacion.CombinacionMaterialId}}">
                                            <thead class="planPagoHeader">
                                              <tr>
                                                <th><span>Fecha</span></th>
                                                <th class="text-center"><span><b>Pago</b></span></th>
                                              </tr>
                                            </thead>

                                            <tbody>
                                              <tr ng-repeat="abono in combinacion.Abono | orderBy:'FechaCompromiso2'">

                                                    <td class="text-left">
                                                        {{abono.FechaCompromiso}}
                                                    </td>

                                                    <td class="text-center">
                                                        {{abono.Pago | currency}}
                                                    </td>

                                              </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
                
                <!-------- mensaje de error ---->
                <div class="row">
                    <div class="col-xs-12">
                        <div ng-repeat="error in mensajeError">
                            <span class="textoError">{{error}}</span>
                        </div>
                    </div>
                </div>
                <br>
                <!---- botones de operacion -->
                <div class="row">
                    <div class="col-xs-6">
                        <a class="btn botonOperacionModal btn-block" ng-click="AnteriorPaso13()">&lt;&lt; ANTERIOR</a>
                    </div>

                    <div class="col-xs-6">
                        <a focus class="btn botonOperacionModal btn-block" ng-click="TerminarPaso13()">SIGUIENTE &gt;&gt;</a>
                    </div>
                </div>
                <br>

            
            </div>
               
            <!-- paso 14 -->
            <div ng-show="pasoPresupuesto == 14">
                
                
                <div class="row">
                    <div class="col-xs-12">
                        <div class="text-center">
                            <span ng-if="opt != 'Personalizar'">
                                <span class="fa fa-check-circle-o iconoBien fa-4x"></span><br>
                                <span style="font-size: 14pt">Presupuesto Guardado</span>
                            </span>
                            
                            <span ng-if="opt == 'Personalizar'">
                                <span class="fa fa-download iconoBien fa-4x"></span><br>
                                <span style="font-size: 14pt">Presupuesto Descargado</span>
                            </span>
                        </div>
                    </div>
                </div>
                <br><br>
                
                <div class="row">
                    <div class="col-xs-12 col-sm-6 col-sm-offset-3">
                        <a focus class="btn botonOperacionModal btn-block" data-dismiss="modal" aria-label="Close" ng-click="CerrarPresupuestoModal()">TERMINAR</a>
                    </div>
                </div>
                
                
                <div ng-show="false">
                   
                   <table id="titulo">
                        <tbody>
                           <tr>
                            <td>{{presupuesto.Titulo}}</td>
                            </tr>
                        </tbody>
                    </table>
                   
                    <table id="descripcion">
                        <tbody>

                           <tr>
                            <td>{{presupuesto.DescripcionCliente}}</td>
                            </tr>
                        </tbody>
                    </table>
                    
                </div>
                
                
                
                
                <div ng-show="false">
                   
                   <table id="encabezadoTitulo1">
                        
                        <tr> 
                            <td>Fecha de Mostar el Presupuesto Cliente</td>
                            <td>no.</td>
                        </tr>
                        
                        <tr> 
                            <td>{{GetHoy()}}</td>
                            <td>No. {{presupuesto.PresupuestoId}}</td>
                        </tr>

                    </table>
                    
                    <table id="encabezadoTitulo2">
                        
                        <tr> 
                            <td>{{presupuesto.Persona.Nombre}} {{presupuesto.Persona.PrimerApellido}} {{presupuesto.Persona.SegundoApellido}}</td>
                        </tr>

                    </table>
                    
                    <table id="incluye">
                        <tr> <td>{{presupuesto.Proyecto.TipoProyecto.Nombre}}</td></tr>
                        
                        <tr> <td>Incluye</td></tr>
                        
                        <tr> <td>Módulos</td></tr>
                        
                        <tr> <td>Puertas: {{presupuesto.Puerta.Nombre}}</td></tr>
                        <tr> <td>Maqueo: {{presupuesto.Maqueo.Nombre}}</td></tr>
                        
                        <tr ng-if="presupuesto.Servicio.length > 0"> <td>Servicios</td></tr>
                        <tr ng-if="presupuesto.Servicio.length > 0" ng-repeat="servicio in presupuesto.Servicio"> <td>{{servicio.Nombre}}</td></tr>
                        
                        <tr> <td>Accesorios</td></tr>
                        <tr ng-repeat="accesorio in presupuesto.Accesorio | orderBy:'Nombre'"> <td>{{accesorio.Nombre}}: {{accesorio.Muestrario}}</td></tr>
                        
                        <tr  ng-if="tipoCubiertaPresupuesto == '1'"> <td>Cubierta de aglomerado</td></tr>
                        <tr  ng-if="tipoCubiertaPresupuesto == '1'"  ng-repeat="cubierta in presupuesto.Cubierta"> <td>{{cubierta}}</td></tr>
                        
                    </table>
                    
                    <table id="datosPresupuesto">

                        <tr> <td></td> <td></td></tr>
                        <tr> 
                            <td>Fecha de entrega: {{presupuesto.PlanPago.FechaFin}}</td>
                            <td>Fecha Venta: {{presupuesto.FechaVenta}}</td>
                        </tr>
                        
                        <tr> 
                            <td>Plan de pagos: {{presupuesto.PlanPago.Nombre}}</td>
                            <td>Número de pagos: {{presupuesto.PlanPago.Pagos}}</td>
                        </tr>

                    </table>
                    
                    <table id="planPagoIncluye">

                        <tr> <td>Incluye</td></tr>
                        <tr> <td>{{presupuesto.Proyecto.TipoProyecto.Nombre}}</td></tr>

                        <tr ng-if="tipoCubiertaPresupuesto == '2'"> 
                            <td> 
                                <span>
                                   <span>Cubierta de {{presupuesto.CubiertaPiedra.Nombre}}: {{CubiertaPiedraPersonalizado()}}</span>
                                </span>

                            </td>
                        </tr>

                    </table>

                    <table id="planPagoPromo">
                        <tr> <td>Promoción</td></tr>
                        <tr> <td>
                            <span> 
                                 <span>Promoción muebles: {{GetTextoPresupustoPromo('Mueble')}}</span>
                             </span>
                        </td></tr>
                        <tr  ng-if="tipoCubiertaPresupuesto == '2'"> <td>
                            <span>
                                <span>Promoción Cubierta:  {{GetTextoPresupustoPromo('Cubierta')}}</span>
                            </span>
                            </td></tr>
                    </table>
                    
                    <table id="promocionMueble">
                        <tr> <td></td></tr>
                        <tr ng-repeat="promo in promocion" ng-if="promo.Presupuesto == true && promo.Show == true && promo.TipoVenta.TipoVentaId == '1'"> <td>
                            <span> 
                                 <span>{{GetTextoDescripcionPromocion(promo)}}</span>
                             </span>
                        </td></tr>
                               
                        <tr><td>*Únicamente se puede elegir una promoción.</td></tr>
                                
                    </table>
                    
                    <table id="promocionCubierta" >
                        <tr> <td></td></tr>
                        <tr ng-repeat="promo in promocion" ng-if="promo.Presupuesto == true && promo.Show == true && promo.TipoVenta.TipoVentaId == '2'"> <td>
                            <span> 
                                 <span>{{GetTextoDescripcionPromocion(promo)}}</span>
                             </span>
                        </td></tr>
                               
                        <tr><td>*Únicamente se puede elegir una promoción.</td></tr>
                                
                    </table>
                    
                    <table id="msnPresupuesto" >
                        
                        <tr><td></td></tr>
                        <tr><td>Este presupuesto no incluye ninguna modificación que se tenga que realizar en la habitación donde se instalará el trabajo (eléctricas, plomería, base de cemento, etc.). También este presupuesto está sujeto a cambios sin previo aviso.</td></tr>
                                
                    </table>
                    
                    <table id="Usuario">
                        <tr><td></td></tr>
                        <tr><td>______________________________</td></tr>
                        <tr><td>Atentamente</td></tr>
                        <tr><td>{{usuario.NombreCompletoColaborador}}</td></tr>
                                
                    </table>
                    
                    <table id="sucursal">
                        <tr><td></td></tr>
                        <tr><td>Sucursal {{UnidadNegocioDato.Ciudad}} {{UnidadNegocioDato.Estado}}</td></tr>
                        <tr><td>Dirección {{UnidadNegocioDato.Domicilio}}</td></tr>
                        <tr><td>Teléfono {{UnidadNegocioDato.Telefono | tel}}</td></tr>     
                    </table>
                    
                </div>
      
            </div>
            
            
        </div>
    </div> 
    
    <!-- Ver Imagen -->
    <div class="modal fade sombraDivModal" id="ImagenPresupuestoModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <br>    <br>   <br>
        <div class="modal-dialog modalPrincipal">
              
            <div class="row">
                <div class="col-xs-12">
                    <button class="btn close cerrarModal" data-dismiss="modal" aria-label="Close" ng-click="CerrarDatosFiscales()"><span aria-hidden="true">&times;</span></button>
                    <span class="tituloModal">{{nombreMuestrario}}</span>
                </div>
            </div>
            <br>

            <div class="row">
                <div class="col-xs-12">
                   

                        <img  ng-if="muestrarioVerImagen[indiceImagen].Imagen.length > 0" class="img-responsive center-block" ng-src="data:image/PNG;base64,{{muestrarioVerImagen[indiceImagen].Imagen}}"/>
                        
                        <div  style="width:100%;" class="text-center">
                            <span ng-if="muestrarioVerImagen[indiceImagen].Imagen.length == 0" id="PrevisualizarImagenColorDetalles"><span style="font-size:30pt" class="fa fa-image"></span></span>
                        </div>
                        
                        <a ng-click="CambiarVerImagen(-1);" class="left carousel-control" ng-show="muestrarioVerImagen.length > 1"> <span class="fa fa-chevron-left vertical-center" ></span></a>
                        <a ng-click="CambiarVerImagen(1);" class="right carousel-control" ng-show="muestrarioVerImagen.length > 1"> <span class="fa fa-chevron-right vertical-center" ></span></a>
              
                </div>
            </div>
            <br>

            <div class="row">
               <div class="col-xs-12 text-center">
                   <span style="font-size: 14pt">{{muestrarioVerImagen[indiceImagen].Nombre}}</span>
               </div>
            </div>
            <br>

        </div>
    </div>
    
    <!-- Modal para mensajes -->
    <div class="modal fade sombraDivModal" id="mensajePresupuesto" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <br>    <br>   <br>
        <div class="modal-dialog modalPrincipal modal-sm">
           <br>
            <div class="row">
                <div class="col-xs-12 text-center" style="font-size:12pt">
                   {{mensaje}}
                </div>
            </div>
            <br>
            <div class="row">
            
                <div class="col-xs-12">
                    <button focus class="btn botonOperacionModal btn-block" data-dismiss="modal" aria-label="Close">Aceptar</button>
                </div>
            </div>
        </div> 
    </div> 
    
</div>

     